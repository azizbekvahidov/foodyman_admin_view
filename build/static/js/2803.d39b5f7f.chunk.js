"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2803],{41481:function(n,e,t){t.d(e,{Z:function(){return v}});var i=t(1413),l=t(29439),o=t(45987),a=t(47313),r=t(66672),s=t(16031),u=t(40765),c=t(46417),d=["handleChange","defaultValue","resetSearch"];function v(n){var e=n.handleChange,t=n.defaultValue,v=n.resetSearch,f=(0,o.Z)(n,d),h=(0,a.useState)(t),m=(0,l.Z)(h,2),p=m[0],x=m[1],Z=(0,a.useMemo)((function(){return(0,s.debounce)((function(n){e(n)}),800)}),[]);return(0,a.useEffect)((function(){x(t)}),[v]),(0,c.jsx)(r.Z,(0,i.Z)({value:p,onChange:function(n){x(n.target.value),Z(n.target.value)},prefix:(0,c.jsx)(u.Z,{})},f))}},89281:function(n,e,t){t.d(e,{h:function(){return f}});var i=t(1413),l=t(29439),o=t(45987),a=t(47313),r=t(12279),s=t.n(r),u=t(74294),c=t(72652),d=t(46417),v=["fetchOptions","debounceTimeout"],f=function(n){var e=n.fetchOptions,t=n.debounceTimeout,r=void 0===t?400:t,f=(0,o.Z)(n,v),h=(0,a.useState)(!1),m=(0,l.Z)(h,2),p=m[0],x=m[1],Z=(0,a.useState)([]),j=(0,l.Z)(Z,2),g=j[0],y=j[1],b=(0,a.useMemo)((function(){return s()((function(n){y([]),x(!0),e(n).then((function(n){y(n),x(!1)}))}),r)}),[e,r]);return(0,d.jsx)(u.Z,(0,i.Z)((0,i.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:b,notFoundContent:p?(0,d.jsx)(c.Z,{size:"small"}):"no results"},f),{},{options:g,onFocus:function(){g.length||b("")}}))}},17649:function(n,e,t){t.d(e,{Z:function(){return i}});t(97421);function i(n){if(null===n||void 0===n||!n.location)return{lat:47.4143302506288,lng:8.532059477976883};var e=n.location.split(", ");return{lat:Number(null===e||void 0===e?void 0:e[0]),lng:Number(null===e||void 0===e?void 0:e[1])}}},84017:function(n,e,t){function i(n){return n?(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$")+" "+Number(n).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):"0"}t.d(e,{Z:function(){return i}})},80314:function(n,e,t){var i=t(47313);e.Z=function(n,e){var t=(0,i.useRef)(!1);(0,i.useEffect)((function(){if(t.current)return n&&n();t.current=!0}),e)}},36311:function(n,e,t){var i=t(34344),l={orderExport:function(n,e){return i.Z.get("dashboard/user/export/order/".concat(n,"/pdf"),{params:e,responseType:"blob"})}};e.Z=l},24391:function(n,e,t){var i=t(29439),l=t(47313),o=t(36311),a=t(83334),r=t.n(a),s=t(51282),u=t(77181),c=t(84695),d=t(59491),v=t(68197),f=t(59624),h=t(24511),m=t(58821),p=t(57864),x=t(58467),Z=t(46417),j=u.Z.Meta;e.Z=function(n){var e=n.id,t=n.handleCancel,a=(0,l.useState)(null),g=(0,i.Z)(a,2),y=g[0],b=g[1],w=(0,h.$)().t,C=(0,x.s0)();return(0,Z.jsx)(Z.Fragment,{children:y?(0,Z.jsx)(s.Z,{}):(0,Z.jsx)(c.Z,{visible:!!e,title:w("selected.download"),closable:!1,handleCancel:t,footer:[(0,Z.jsx)(d.Z,{type:"default",onClick:t,children:w("cancel")},"cancelBtn")],children:(0,Z.jsxs)(v.Z,{children:[(0,Z.jsx)(f.Z,{span:12,children:(0,Z.jsx)(u.Z,{title:w("download.pdf"),onClick:function(){return function(n){b(!0),o.Z.orderExport(n).then((function(e){r()(e,"invoice_".concat(n,".pdf"),"application/pdf"),t()})).finally((function(){return b(!1)}))}(e)},className:"text-center cursor-pointer",children:(0,Z.jsx)(j,{className:"d-flex align-items-center justify-content-center",title:(0,Z.jsx)(m._JY,{size:80})})})}),(0,Z.jsx)(f.Z,{span:12,children:(0,Z.jsx)(u.Z,{title:w("download.check"),onClick:function(){return function(n){C("/orders/generate-invoice/".concat(n))}(e)},className:"text-center cursor-pointer",children:(0,Z.jsx)(j,{className:"d-flex align-items-center justify-content-center",title:(0,Z.jsx)(p.ih9,{size:85})})})})]})})})}},24077:function(n,e,t){t.d(e,{Z:function(){return j}});var i=t(74165),l=t(15861),o=t(29439),a=t(47313),r=t(18197),s=t(84695),u=t(59491),c=t(68197),d=t(59624),v=t(2717),f=t(7370),h=t(90954),m=t(24511),p=t(49986),x=t(89281),Z=t(46417);function j(n){var e,t,j,g=n.orderDetails,y=n.handleCancel,b=(0,m.$)().t,w=(0,v.v9)((function(n){return n.menu}),v.wU).activeMenu,C=r.Z.useForm(),S=(0,o.Z)(C,1)[0],k=(0,v.I0)(),_=(0,a.useState)(!1),N=(0,o.Z)(_,2),F=N[0],I=N[1];function B(){return(B=(0,l.Z)((0,i.Z)().mark((function n(e){var t;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={search:e.length?e:void 0,page:1,perPage:10,role:"deliveryman",shop_id:g.shop.id,exist_token:1},n.abrupt("return",p.Z.getAll(t).then((function(n){return n.data.map((function(n){return{label:n.firstname+" "+n.lastname||"no name",value:n.id}}))})));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,Z.jsx)(s.Z,{visible:!!g,onCancel:y,footer:[(0,Z.jsx)(u.Z,{type:"primary",onClick:function(){return S.submit()},loading:F,children:b("save")},"saveBtn"),(0,Z.jsx)(u.Z,{type:"default",onClick:y,children:b("cancel")},"cancelBtn")],children:(0,Z.jsx)(r.Z,{form:S,layout:"vertical",onFinish:function(n){var e={deliveryman:n.deliveryman.value};I(!0),f.Z.updateDelivery(g.id,e).then((function(){y(),k((0,h.xo)(w))})).finally((function(){return I(!1)}))},initialValues:{deliveryman:{label:g.deliveryman?(null===g||void 0===g||null===(e=g.deliveryman)||void 0===e?void 0:e.firstname)+" "+(null===g||void 0===g||null===(t=g.deliveryman)||void 0===t?void 0:t.lastname):null,value:g.deliveryman?null===g||void 0===g||null===(j=g.deliveryman)||void 0===j?void 0:j.id:null}},children:(0,Z.jsx)(c.Z,{gutter:12,children:(0,Z.jsx)(d.Z,{span:24,children:(0,Z.jsx)(r.Z.Item,{label:b("deliveryman"),name:"deliveryman",rules:[{required:!0,message:b("required")}],children:(0,Z.jsx)(x.h,{className:"w-100",debounceTimeout:500,placeholder:b("select.shop"),fetchOptions:function(n){return B.apply(this,arguments)},allowClear:!0})})})})})})}},7920:function(n,e,t){t.d(e,{Z:function(){return x}});var i=t(1413),l=t(29439),o=t(47313),a=t(18197),r=t(84695),s=t(59491),u=t(68197),c=t(59624),d=t(74294),v=t(2717),f=t(24511),h=t(7370),m=t(90954),p=t(46417);function x(n){var e=n.orderDetails,t=n.handleCancel,x=n.status,Z=(0,v.v9)((function(n){return n.menu}),v.wU).activeMenu,j=a.Z.useForm(),g=(0,l.Z)(j,1)[0],y=(0,v.I0)(),b=(0,f.$)().t,w=(0,o.useState)(!1),C=(0,l.Z)(w,2),S=C[0],k=C[1],_=(0,o.useState)(x),N=(0,l.Z)(_,2),F=N[0],I=N[1];console.log("status",x),(0,o.useEffect)((function(){var n=x.findIndex((function(n){return n.name===e.status})),t=[x[n],x[n+1],{name:"canceled",id:8,active:!0}];n<0&&(t=[x[n+1],"canceled"]),I(t)}),[e]);return(0,p.jsx)(r.Z,{visible:!!e,title:e.title,onCancel:t,footer:[(0,p.jsx)(s.Z,{type:"primary",onClick:function(){return g.submit()},loading:S,children:b("save")},"save-form"),(0,p.jsx)(s.Z,{type:"default",onClick:t,children:b("cancel")},"cansel-modal")],children:(0,p.jsx)(a.Z,{form:g,layout:"vertical",onFinish:function(n){k(!0);var l=(0,i.Z)({},n);h.Z.updateStatus(e.id,l).then((function(){t(),y((0,m.xo)(Z))})).finally((function(){return k(!1)}))},initialValues:{status:e.status},children:(0,p.jsx)(u.Z,{gutter:12,children:(0,p.jsx)(c.Z,{span:24,children:(0,p.jsx)(a.Z.Item,{label:b("status"),name:"status",rules:[{required:!0,message:b("required")}],children:(0,p.jsx)(d.Z,{children:null===F||void 0===F?void 0:F.map((function(n){return(0,p.jsx)(d.Z.Option,{value:null===n||void 0===n?void 0:n.name,children:b(null===n||void 0===n?void 0:n.name)},null===n||void 0===n?void 0:n.name)}))})})})})})})}},80355:function(n,e,t){var i=t(29439),l=t(84697),o=t(83999),a=t(84695),r=t(59491),s=t(77181),u=t(68197),c=t(59624),d=t(66204),v=t(47313),f=t(24511),h=t(7370),m=t(51282),p=t(58821),x=t(2717),Z=t(97421),j=t(18478),g=t(84618),y=t(17649),b=t(66461),w=t(22539),C=t(3394),S=t(57864),k=t(46417),_=o.Z.Step,N=function(){return(0,k.jsx)("img",{src:j,width:"50",alt:"Pin"})},F=function(){return(0,k.jsx)("img",{src:g,width:"50",alt:"Pin"})},I=["blue","red","gold","volcano","cyan","lime"];e.Z=function(n){var e,t,j,g,B,E,M=n.id,T=n.handleCancel,U=(0,f.$)().t,V=(0,v.useState)(null),$=(0,i.Z)(V,2),O=$[0],q=$[1],A=(0,v.useState)(null),D=(0,i.Z)(A,2),L=D[0],P=D[1],z=(0,v.useState)(null),G=(0,i.Z)(z,2),R=G[0],W=G[1],J=(0,x.v9)((function(n){return n.globalSettings}),x.wU).settings,K=(0,y.Z)(J),Q=(0,v.useState)(0),Y=(0,i.Z)(Q,2),H=Y[0],X=Y[1],nn=(0,v.useState)((0,y.Z)(J)),en=(0,i.Z)(nn,2),tn=en[0],ln=en[1],on=(0,v.useState)((0,y.Z)(J)),an=(0,i.Z)(on,2),rn=an[0],sn=an[1],un=(0,v.useState)([{id:0,name:"new",icon:(0,k.jsx)(b.Z,{})},{id:1,name:"accepted",icon:(0,k.jsx)(p.IQF,{})},{id:2,name:"ready",icon:(0,k.jsx)(w.TkG,{})},{id:3,name:"on_a_way",icon:(0,k.jsx)(C.Akc,{})},{id:4,name:"delivered",icon:(0,k.jsx)(C.kme,{})}]),cn=(0,i.Z)(un,2),dn=cn[0],vn=cn[1];var fn=(0,x.v9)((function(n){return n.globalSettings.settings}),x.wU).google_map_key;(0,v.useEffect)((function(){q(!0),h.Z.getById(M).then((function(n){var e,t=n.data;vn("canceled"===t.status?[{id:1,name:"new",icon:(0,k.jsx)(b.Z,{})},{id:5,name:"canceled",icon:(0,k.jsx)(S.SV5,{})}]:dn),X("canceled"===t.status?1:null===(e=dn.find((function(n){return n.name===t.status})))||void 0===e?void 0:e.id),W("canceled"===t.status?"error":"success"),P(t),sn({lat:t.location.latitude,lng:t.location.longitude}),ln({lat:t.shop.location.latitude,lng:t.shop.location.longitude})})).finally((function(){q(!1)}))}),[]);return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(a.Z,{visible:!!M,title:U("show.locations"),onCancel:function(){return T()},style:{minWidth:"80vw"},footer:[(0,k.jsx)(r.Z,{type:"default",onClick:T,children:U("cancel")},"cancelBtn")],children:O?(0,k.jsx)(m.Z,{}):(0,k.jsxs)(s.Z,{children:[(0,k.jsx)(o.Z,{current:H,status:R,className:"mb-5",children:null===dn||void 0===dn?void 0:dn.map((function(n,e){return(0,k.jsx)(_,{title:U(n.name),icon:null===n||void 0===n?void 0:n.icon},n.id+e)}))}),(0,k.jsxs)(u.Z,{gutter:12,children:[(0,k.jsxs)(c.Z,{span:12,children:[(0,k.jsxs)("h3",{children:[U("order.id")," #",null===L||void 0===L?void 0:L.id]}),(0,k.jsxs)("p",{children:[(0,k.jsx)(p.D73,{})," ",null===L||void 0===L?void 0:L.created_at]}),(0,k.jsxs)("p",{children:[U("schedulet.at")," ",null===L||void 0===L?void 0:L.delivery_date]}),(0,k.jsxs)("span",{children:[(0,k.jsx)("strong",{children:null===L||void 0===L||null===(e=L.shop)||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title})," ",null===L||void 0===L||null===(j=L.details)||void 0===j?void 0:j.map((function(n,e){var t;return(0,k.jsx)(d.Z,{color:I[e],children:null===n||void 0===n||null===(t=n.stock)||void 0===t?void 0:t.product.translation.title})}))]})]}),(0,k.jsxs)(c.Z,{span:12,children:[(0,k.jsxs)("p",{children:[U("status")," ","new"===(null===L||void 0===L?void 0:L.status)?(0,k.jsx)(d.Z,{color:"blue",children:U(null===L||void 0===L?void 0:L.status)}):"canceled"===(null===L||void 0===L?void 0:L.status)?(0,k.jsx)(d.Z,{color:"error",children:U(null===L||void 0===L?void 0:L.status)}):(0,k.jsx)(d.Z,{color:"cyan",children:U(null===L||void 0===L?void 0:L.status)})]}),(0,k.jsxs)("p",{children:[U("payment.method")," ",(0,k.jsx)("strong",{children:null===L||void 0===L||null===(g=L.transaction)||void 0===g||null===(B=g.payment_system)||void 0===B?void 0:B.tag})]}),(0,k.jsxs)("p",{children:[U("order.type")," ",(0,k.jsx)("strong",{children:null===L||void 0===L?void 0:L.delivery_type})]}),(0,k.jsxs)("p",{children:[U("payment.type")," ",(0,k.jsx)("strong",{children:null===L||void 0===L||null===(E=L.transaction)||void 0===E?void 0:E.status})]})]}),(0,k.jsxs)(c.Z,{span:24,className:"mt-5",children:[(0,k.jsx)("h4",{children:U("map")}),(0,k.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,k.jsxs)(l.ZP,{bootstrapURLKeys:{key:Z.kr||fn},defaultZoom:15,center:K,yesIWantToUseGoogleMapApiInternals:!0,options:{fullscreenControl:!1},onGoogleApiLoaded:function(n){for(var e=n.map,t=n.maps,i=[tn,rn].map((function(n){return{lat:Number(n.lat||"0"),lng:Number(n.lng||"0")}})),l=new t.LatLngBounds,o=0;o<i.length;o++)l.extend(i[o]);e.fitBounds(l)},children:[(0,k.jsx)(F,{lat:null===tn||void 0===tn?void 0:tn.lat,lng:null===tn||void 0===tn?void 0:tn.lng}),(0,k.jsx)(N,{lat:null===rn||void 0===rn?void 0:rn.lat,lng:null===rn||void 0===rn?void 0:rn.lng})]})})]})]})]})})})}},84618:function(n,e,t){n.exports=t.p+"static/media/shop.46d7a94ca800c711764a.png"},18478:function(n,e,t){n.exports=t.p+"static/media/user.fbe7078c52acde79652d.jpg"}}]);