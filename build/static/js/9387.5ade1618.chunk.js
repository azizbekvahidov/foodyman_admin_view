"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9387],{89281:function(e,n,t){t.d(n,{h:function(){return m}});var a=t(1413),s=t(29439),i=t(45987),r=t(47313),u=t(12279),l=t.n(u),o=t(74294),d=t(72652),c=t(46417),f=["fetchOptions","debounceTimeout"],m=function(e){var n=e.fetchOptions,t=e.debounceTimeout,u=void 0===t?400:t,m=(0,i.Z)(e,f),h=(0,r.useState)(!1),Z=(0,s.Z)(h,2),g=Z[0],b=Z[1],p=(0,r.useState)([]),x=(0,s.Z)(p,2),v=x[0],j=x[1],_=(0,r.useMemo)((function(){return l()((function(e){j([]),b(!0),n(e).then((function(e){j(e),b(!1)}))}),u)}),[n,u]);return(0,c.jsx)(o.Z,(0,a.Z)((0,a.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:_,notFoundContent:g?(0,c.jsx)(d.Z,{size:"small"}):"no results"},m),{},{options:v,onFocus:function(){v.length||_("")}}))}},59387:function(e,n,t){t.r(n);var a=t(1413),s=t(29439),i=t(47313),r=t(58467),u=t(34491),l=t(18197),o=t(77181),d=t(68197),c=t(59624),f=t(66672),m=t(74294),h=t(99096),Z=t(59491),g=t(2717),b=t(90954),p=t(24511),x=t(7004),v=t(70816),j=t.n(v),_=t(71274),y=t(51282),w=t(18929),q=t(38758),F=t(89281),Y=t(46417),D=[{title:"order",value:"order"},{title:"subscribe",value:"subscribe"},{title:"verify",value:"verify"}];n.default=function(){var e=(0,p.$)().t,n=(0,g.v9)((function(e){return e.menu}),g.wU).activeMenu,t=(0,g.I0)(),v=l.Z.useForm(),N=(0,s.Z)(v,1)[0],I=(0,r.s0)(),M=(0,i.useState)(!1),S=(0,s.Z)(M,2),V=S[0],C=S[1],O=(0,i.useState)(!1),E=(0,s.Z)(O,2),U=E[0],k=E[1],H=(0,r.UO)().id,T=(0,g.v9)((function(e){return e.formLang}),g.wU),A=T.defaultLang,P=T.languages;(0,i.useEffect)((function(){return function(){var e=N.getFieldsValue(!0),s=JSON.stringify(e.send_to),i=(0,a.Z)((0,a.Z)({},e),{},{send_to:s});t((0,b.nc)({activeMenu:n,data:i}))}}),[]);(0,i.useEffect)((function(){n.refetch&&function(e){k(!0),_.Z.getById(e).then((function(e){var n=(0,a.Z)((0,a.Z)({},e.data),{},{send_to:j()(e.data.send_to,"YYYY-MM-DD HH:mm:ss"),has_date:!0,email_setting_id:{label:e.data.email_setting.host,value:e.data.email_setting.id}});N.setFieldsValue(n)})).finally((function(){k(!1),t((0,b.A_)(n))}))}(H)}),[n.refetch]);return(0,Y.jsx)(Y.Fragment,{children:U?(0,Y.jsx)(y.Z,{}):(0,Y.jsx)(o.Z,{title:e("edit.subscriber"),className:"h-100",children:(0,Y.jsxs)(l.Z,{name:"subscriber-add",layout:"vertical",onFinish:function(s){console.log("data",s);var i=(0,a.Z)((0,a.Z)({},s),{},{send_to:j()(s.send_to).format("YYYY-MM-DD HH:mm:ss"),email_setting_id:s.email_setting_id.value});C(!0);var r="message/subscriber";_.Z.update(H,i).then((function(){u.Am.success(e("successfully.created")),t((0,b.ph)((0,a.Z)((0,a.Z)({},n),{},{nextUrl:r}))),I("/".concat(r)),t((0,w.F)())})).finally((function(){return C(!1)}))},form:N,initialValues:(0,a.Z)((0,a.Z)({},n.data),function(){var e=n.data;if(null===e||void 0===e||!e.send_to)return e;var t=e.send_to;return(0,a.Z)((0,a.Z)({},e),{},{send_to:j()(t,"YYYY-MM-DD")})}()),className:"d-flex flex-column h-100",children:[(0,Y.jsxs)(d.Z,{gutter:12,children:[(0,Y.jsx)(c.Z,{span:12,children:(0,Y.jsx)(l.Z.Item,{label:e("subject"),name:"subject",rules:[{required:!0,message:e("required")}],children:(0,Y.jsx)(f.Z,{})})}),(0,Y.jsx)(c.Z,{span:12,children:(0,Y.jsx)(l.Z.Item,{label:e("type"),name:"type",rules:[{required:!0,message:e("required")}],children:(0,Y.jsx)(m.Z,{disabled:!0,options:D,className:"w-100"})})}),(0,Y.jsx)(c.Z,{span:12,children:(0,Y.jsx)(l.Z.Item,{label:e("email.setting.id"),name:"email_setting_id",rules:[{required:!0,message:e("required")}],children:(0,Y.jsx)(F.h,{fetchOptions:function(){return q.Z.get().then((function(e){return e.data.map((function(e){return{label:e.host,value:e.id}}))}))},className:"w-100",placeholder:e("email.setting.id")})})}),(0,Y.jsx)(c.Z,{span:24,children:(0,Y.jsx)(x.Z,{languages:P,form:N,lang:A})}),(0,Y.jsx)(c.Z,{span:12,children:(0,Y.jsx)(l.Z.Item,{label:e("alt.body"),name:"alt_body",rules:[{required:!0,message:e("required")}],children:(0,Y.jsx)(f.Z,{})})}),(0,Y.jsx)(c.Z,{span:6,children:(0,Y.jsx)(l.Z.Item,{label:e("send.to"),name:"send_to",rules:[{required:!0,message:e("required")}],children:(0,Y.jsx)(h.Z,{showTime:!0,className:"w-100",disabledDate:function(e){return j()().add(-1,"days")>=e}})})})]}),(0,Y.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,Y.jsx)("div",{className:"pb-5",children:(0,Y.jsx)(Z.Z,{type:"primary",htmlType:"submit",loading:V,children:e("send")})})})]})})})}},7004:function(e,n,t){t.d(n,{Z:function(){return c}});t(47313);var a=t(18197),s=t(24511),i=t(68144),r=t(76733),u=t.n(r),l=t(97421),o=t(36104),d=t(46417);function c(e){var n=e.form,t=(e.lang,e.languages,(0,s.$)().t);return(0,d.jsx)("div",{className:"textEditor",children:(0,d.jsx)(a.Z.Item,{label:t("newsletter.content"),name:"body",valuePropName:"data",getValueFromEvent:function(e,n){return n.getData()},rules:[{required:!0,message:t("required")}],className:"description-editor",children:(0,d.jsx)(i.CKEditor,{editor:u(),config:{extraPlugins:[function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return function(e){return{upload:function(){return new Promise((function(n,t){var a=new FormData;e.file.then((function(e){a.append("image",e),a.append("type","blogs"),o.Z.upload(a).then((function(e){var t=e.data;n({default:"".concat(l.bV+t.title)})})).catch((function(e){t(e)}))}))}))}}}(e)}}]},onChange:function(e,n){n.getData()},onBlur:function(e,t){var a=t.getData();n.setFieldsValue({body:a})}})})})}}}]);