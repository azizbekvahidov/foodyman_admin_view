"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4662],{32380:function(e,n,t){t.d(n,{o:function(){return d}});var a=t(1413),r=t(29439),i=t(45987),l=t(47313),s=t(84762),c=t(72652),u=t(46417),o=["fetchOptions","refetch"],d=function(e){var n=e.fetchOptions,t=e.refetch,d=void 0!==t&&t,m=(0,i.Z)(e,o),Z=(0,l.useState)(!1),p=(0,r.Z)(Z,2),v=p[0],h=p[1],f=(0,l.useState)([]),x=(0,r.Z)(f,2),j=x[0],g=x[1];return(0,u.jsx)(s.Z,(0,a.Z)({treeLine:!0,treeData:v?[]:j,treeDefaultExpandAll:!0,labelInValue:!0,onFocus:function(){j.length&&!d||(h(!0),n().then((function(e){g(e),h(!1)})))},notFoundContent:v?(0,u.jsx)(c.Z,{size:"small"}):"no results"},m))}},55940:function(e,n,t){t.d(n,{Z:function(){return m}});var a=t(1413),r=t(45987),i=(t(47313),t(59491)),l=t(47515),s=t(34491),c=t(24511),u=t(79492),o=t(46417),d=["size","onClick","type"];function m(e){var n=e.size,t=void 0===n?"":n,m=e.onClick,Z=e.type,p=void 0===Z?"default":Z,v=(0,r.Z)(e,d),h=(0,c.$)().t,f=(0,u.Z)().isDemo;return(0,o.jsx)(i.Z,(0,a.Z)({size:t,icon:(0,o.jsx)(l.Z,{}),onClick:function(e){f?s.Am.warning(h("cannot.work.demo")):m(e)},type:p},v))}},73431:function(e,n,t){var a=t(47313),r=t(39180),i=t(2717),l=t(28830),s=t(60535),c=t(46417);n.Z=function(){var e=(0,i.I0)(),n=(0,i.v9)((function(e){return e.formLang}),i.wU),t=n.languages,u=n.defaultLang;(0,a.useEffect)((function(){s.Z.getAllActive().then((function(n){var t=n.data;e((0,l.dc)(t)),e((0,l.mh)(t.find((function(e){return 1===e.default})).locale))}))}),[]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(r.ZP.Group,{value:u,onChange:function(n){var t=n.target.value;e((0,l.mh)(t))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((function(e){return(0,c.jsx)(r.ZP.Button,{value:e.locale,children:e.title},e.id)}))})})}},89281:function(e,n,t){t.d(n,{h:function(){return Z}});var a=t(1413),r=t(29439),i=t(45987),l=t(47313),s=t(12279),c=t.n(s),u=t(74294),o=t(72652),d=t(46417),m=["fetchOptions","debounceTimeout"],Z=function(e){var n=e.fetchOptions,t=e.debounceTimeout,s=void 0===t?400:t,Z=(0,i.Z)(e,m),p=(0,l.useState)(!1),v=(0,r.Z)(p,2),h=v[0],f=v[1],x=(0,l.useState)([]),j=(0,r.Z)(x,2),g=j[0],y=j[1],b=(0,l.useMemo)((function(){return c()((function(e){y([]),f(!0),n(e).then((function(e){y(e),f(!1)}))}),s)}),[n,s]);return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:b,notFoundContent:h?(0,d.jsx)(o.Z,{size:"small"}):"no results"},Z),{},{options:g,onFocus:function(){g.length||b("")}}))}},76076:function(e,n,t){var a=t(1413),r=t(29439),i=t(47313),l=t(55291),s=t(77181),c=t(18197),u=t(68197),o=t(59624),d=t(32697),m=t(45705),Z=t(59491),p=t(72652),v=t(5170),h=t(2717),f=t(17101),x=t(90954),j=t(24511),g=t(58467),y=t(46417);n.Z=function(e){var n=e.next,t=e.prev,b=(0,j.$)().t,k=(0,h.I0)(),q=(0,g.UO)().uuid,I=(0,h.v9)((function(e){return e.menu}),h.wU).activeMenu,w=(0,i.useState)([]),S=(0,r.Z)(w,2),N=S[0],C=S[1],O=(0,i.useState)(!1),F=(0,r.Z)(O,2),_=F[0],U=F[1],L=(0,i.useState)(!1),V=(0,r.Z)(L,2),E=V[0],M=V[1];(0,i.useEffect)((function(){U(!0),v.Z.getAllGroups({valid:!0}).then((function(e){var n=e.data.map((function(e){var n;return{id:e.id,label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id}}));C(n)})).finally((function(){return U(!1)}))}),[]);return(0,y.jsx)(s.Z,{children:(0,y.jsx)(c.Z,{layout:"vertical",initialValues:(0,a.Z)({},I.data),onFinish:function(e){M(!0);var t=e.extras||[];t.sort((function(e,n){return e-n})),f.Z.extras(q,{extras:t}).then((function(){k((0,x.nc)({activeMenu:I,data:(0,a.Z)((0,a.Z)({},I.data),{},{extras:t})})),l.ZP.success(b("product.extras.saved")),n()})).finally((function(){return M(!1)}))},children:_?(0,y.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,y.jsx)(p.Z,{size:"large",className:"py-5"})}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.Z,{gutter:12,children:(0,y.jsx)(o.Z,{span:12,children:(0,y.jsx)(c.Z.Item,{label:b("extras"),name:"extras",children:(0,y.jsx)(d.Z.Group,{options:N})})})}),(0,y.jsxs)(m.Z,{children:[(0,y.jsx)(Z.Z,{onClick:t,children:b("prev")}),(0,y.jsx)(Z.Z,{type:"primary",htmlType:"submit",loading:E,children:b("next")})]})]})})})}},78873:function(e,n,t){var a=t(1413),r=t(93433),i=t(4942),l=t(29439),s=t(47313),c=t(77181),u=t(83371),o=t(68197),d=t(59624),m=t(45705),Z=t(59491),p=t(72652),v=t(2717),h=t(58467),f=t(90954),x=t(95882),j=t(24511),g=t(17101),y=t(97421),b=t(46417);n.Z=function(e){var n,t,k,q,I,w,S=e.prev,N=(0,j.$)().t,C=(0,v.v9)((function(e){return e.menu}),v.wU).activeMenu,O=(0,v.v9)((function(e){return e.formLang}),v.wU),F=O.defaultLang,_=O.languages,U=(0,v.v9)((function(e){return e.product}),v.wU).params,L=(0,h.s0)(),V=(0,v.I0)(),E=(0,s.useState)({}),M=(0,l.Z)(E,2),P=M[0],A=M[1],T=(0,s.useState)(null),z=(0,l.Z)(T,2),$=z[0],D=z[1],W=(0,h.UO)().uuid;function B(e){D(!0),g.Z.getById(e).then((function(e){var n=(0,a.Z)((0,a.Z)((0,a.Z)({},e.data),function(e){if(null===e||void 0===e||!e.translations)return{};var n=e.translations,t=_.map((function(e){var t,a,r;return r={},(0,i.Z)(r,"title[".concat(e.locale,"]"),null===(t=n.find((function(n){return n.locale===e.locale})))||void 0===t?void 0:t.title),(0,i.Z)(r,"description[".concat(e.locale,"]"),null===(a=n.find((function(n){return n.locale===e.locale})))||void 0===a?void 0:a.description),r}));return Object.assign.apply(Object,[{}].concat((0,r.Z)(t)))}(e.data)),{},{properties:e.data.properties.map((function(e,n){var t;return t={id:n},(0,i.Z)(t,"key[".concat(e.locale,"]"),e.key),(0,i.Z)(t,"value[".concat(e.locale,"]"),e.value),t})),translation:void 0,translations:void 0});A(n)})).finally((function(){return D(!1)}))}return(0,s.useEffect)((function(){B(W)}),[]),$?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,b.jsx)(p.Z,{size:"large",className:"py-5"})}):(0,b.jsxs)(c.Z,{title:N("product.info"),children:[(0,b.jsxs)(u.Z,{bordered:!0,children:[(0,b.jsx)(u.Z.Item,{label:"".concat(N("title")," (").concat(F,")"),span:3,column:3,children:P["title[".concat(F,"]")]}),(0,b.jsx)(u.Z.Item,{label:"".concat(N("description")," (").concat(F,")"),span:3,column:3,children:P["description[".concat(F,"]")]}),(0,b.jsx)(u.Z.Item,{label:N("shop"),span:1.5,column:1.5,children:null===(n=P.shop)||void 0===n?void 0:n.translation.title}),(0,b.jsx)(u.Z.Item,{label:N("category"),span:1.5,column:1.5,children:null===(t=P.category)||void 0===t?void 0:t.translation.title}),(0,b.jsx)(u.Z.Item,{label:N("brand"),span:1.5,column:1.5,children:null===(k=P.brand)||void 0===k?void 0:k.title}),(0,b.jsx)(u.Z.Item,{label:N("unit"),span:1.5,column:1.5,children:null===(q=P.unit)||void 0===q?void 0:q.translation.title}),(0,b.jsx)(u.Z.Item,{label:N("images"),span:3,column:3,children:(0,b.jsx)(o.Z,{gutter:12,children:null===P||void 0===P||null===(I=P.galleries)||void 0===I?void 0:I.map((function(e,n){return(0,b.jsx)(d.Z,{children:(0,b.jsx)("img",{width:80,alt:"product",src:y.bV+e.path})},"image"+n)}))})}),(0,b.jsx)(u.Z.Item,{span:3,column:3,label:N("tax"),children:P.tax}),(0,b.jsx)(u.Z.Item,{span:3,column:3,label:N("min.quantity"),children:P.min_qty}),(0,b.jsx)(u.Z.Item,{span:3,column:3,label:N("max.quantity"),children:P.max_qty})]}),null===(w=P.stocks)||void 0===w?void 0:w.map((function(e,n){return e?(0,b.jsxs)(u.Z,{bordered:!0,className:"mt-4",children:[(0,b.jsx)(u.Z.Item,{label:N("price"),span:2,column:2,children:e.price}),(0,b.jsx)(u.Z.Item,{label:N("quantity"),span:2,column:2,children:e.quantity}),e.extras.map((function(e,n){var t,a;return(0,b.jsx)(u.Z.Item,{label:null===e||void 0===e||null===(t=e.group)||void 0===t||null===(a=t.translation)||void 0===a?void 0:a.title,span:2,column:2,children:null===e||void 0===e?void 0:e.value},"extra"+n)}))]},"desc"+n):""})),(0,b.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,b.jsxs)(m.Z,{children:[(0,b.jsx)(Z.Z,{onClick:S,children:N("prev")}),(0,b.jsx)(Z.Z,{type:"primary",onClick:function(){var e=(0,a.Z)({status:void 0},U),n="catalog/products";V((0,f.ph)((0,a.Z)((0,a.Z)({},C),{},{nextUrl:n}))),V((0,x.t2)(e)),L("/".concat(n))},children:N("finish")})]})})]})}},70432:function(e,n,t){t.d(n,{Z:function(){return N}});var a=t(93433),r=t(1413),i=t(29439),l=t(47313),s=t(18197),c=t(45705),u=t(59491),o=t(84695),d=t(55291),m=t(77181),Z=t(68197),p=t(59624),v=t(66672),h=t(78508),f=t(12019),x=t(47515),j=t(2717),g=t(73431),y=t(46417);function b(e){var n=e.editData,t=e.handleCancel,a=e.editProperty,c=s.Z.useForm(),u=(0,i.Z)(c,1)[0],d=(0,j.v9)((function(e){return e.formLang}),j.wU),m=d.defaultLang,h=d.languages;return(0,l.useEffect)((function(){u.setFieldsValue(n)}),[n]),(0,y.jsxs)(o.Z,{title:"Edit product property",visible:!!n,okText:"Save",onCancel:t,onOk:function(){return u.submit()},children:[(0,y.jsx)(Z.Z,{className:"mb-3",children:(0,y.jsx)(p.Z,{span:24,children:(0,y.jsx)(g.Z,{})})}),(0,y.jsx)(s.Z,{form:u,layout:"vertical",onFinish:function(e){var t=(0,r.Z)((0,r.Z)({},n),e);a(t)},children:(0,y.jsxs)(Z.Z,{className:"mt-4",children:[(0,y.jsx)(p.Z,{span:24,children:h.map((function(e){return(0,y.jsx)(s.Z.Item,{label:"Key",name:"key[".concat(e.locale,"]"),rules:[{required:e.locale===m,message:""}],hidden:e.locale!==m,children:(0,y.jsx)(v.Z,{})},"key"+e.locale)}))}),(0,y.jsx)(p.Z,{span:24,children:h.map((function(e){return(0,y.jsx)(s.Z.Item,{label:"Value",name:"value[".concat(e.locale,"]"),rules:[{required:e.locale===m,message:""}],hidden:e.locale!==m,children:(0,y.jsx)(v.Z,{})},"value"+e.locale)}))})]})})]})}var k=t(90954),q=t(17101),I=t(24511),w=t(58467),S=t(55940),N=function(e){var n,t=e.next,g=e.prev,N=(0,I.$)().t,C=(0,j.I0)(),O=(0,w.UO)().uuid,F=(0,j.v9)((function(e){return e.menu}),j.wU).activeMenu,_=(0,j.v9)((function(e){return e.formLang}),j.wU),U=_.defaultLang,L=_.languages,V=s.Z.useForm(),E=(0,i.Z)(V,1)[0],M=(0,l.useState)(null),P=(0,i.Z)(M,2),A=P[0],T=P[1],z=(0,l.useState)((null===(n=F.data)||void 0===n?void 0:n.properties)||[]),$=(0,i.Z)(z,2),D=$[0],W=$[1],B=(0,l.useState)(!1),G=(0,i.Z)(B,2),K=G[0],X=G[1],H=[{key:"2",title:N("key"),render:function(e,n){return n["key[".concat(U,"]")]}},{key:"4",title:N("value"),render:function(e,n){return n["value[".concat(U,"]")]}},{key:"5",title:N("options"),render:function(e){return(0,y.jsxs)(c.Z,{children:[(0,y.jsx)(u.Z,{type:"primary",icon:(0,y.jsx)(f.Z,{}),onClick:function(){return T(e)}}),(0,y.jsx)(S.Z,{type:"primary",danger:!0,icon:(0,y.jsx)(x.Z,{}),onClick:function(){return J(e)}})]})}}];(0,l.useEffect)((function(){if(D.length&&O){var e=D;C((0,k.nc)({activeMenu:F,data:(0,r.Z)((0,r.Z)({},F.data),{},{properties:e})}))}}),[D]);var J=function(e){o.Z.confirm({title:N("delete.product"),okText:N("yes"),okType:"danger",onOk:function(){W((function(n){return n.filter((function(n){return n.id!==e.id}))}))}})},Q=function(){return T(null)};return(0,y.jsxs)(m.Z,{children:[(0,y.jsx)(s.Z,{layout:"vertical",form:E,onFinish:function(e){var n=parseInt(50*Math.random()),t=(0,r.Z)((0,r.Z)({},e),{},{id:n});W((function(e){return[].concat((0,a.Z)(e),[t])})),E.resetFields()},children:(0,y.jsxs)(Z.Z,{gutter:12,className:"mb-3",children:[(0,y.jsx)(p.Z,{span:8,children:L.map((function(e){return(0,y.jsx)(s.Z.Item,{name:"key[".concat(e.locale,"]"),rules:[{required:e.locale===U,message:N("required")}],hidden:e.locale!==U,children:(0,y.jsx)(v.Z,{placeholder:"Key"})},"key"+e.locale)}))}),(0,y.jsx)(p.Z,{span:8,children:L.map((function(e){return(0,y.jsx)(s.Z.Item,{name:"value[".concat(e.locale,"]"),rules:[{required:e.locale===U,message:N("required")}],hidden:e.locale!==U,children:(0,y.jsx)(v.Z,{placeholder:N("value")})},"value"+e.locale)}))}),(0,y.jsx)(p.Z,{span:4,children:(0,y.jsx)(u.Z,{type:"primary",htmlType:"submit",children:N("save")})})]})}),(0,y.jsx)(h.Z,{scroll:{x:!0},columns:H,dataSource:D,pagination:!1,rowKey:function(e){return e.id}}),A&&(0,y.jsx)(b,{editData:A,handleCancel:Q,editProperty:function(e){W((function(n){return n.map((function(n){return n.id===e.id?e:n}))})),Q()}}),(0,y.jsxs)(c.Z,{className:"mt-4",children:[(0,y.jsx)(u.Z,{onClick:g,children:N("prev")}),(0,y.jsx)(u.Z,{type:"primary",onClick:function(){X(!0);var e=function(){var e=[],n=[];return D.forEach((function(t){var a={},r={};L.forEach((function(e){a[e.locale]=t["key[".concat(e.locale,"]")],r[e.locale]=t["value[".concat(e.locale,"]")]})),e.push(a),n.push(r)})),{key:e,value:n}}();q.Z.properties(O,e).then((function(){d.ZP.success(N("product.properties.saved")),t()})).finally((function(){return X(!1)}))},loading:K,children:N("next")})]})]})}},8597:function(e,n,t){var a=t(4942),r=t(93433),i=t(1413),l=t(29439),s=t(47313),c=t(18197),u=t(77181),o=t(68197),d=t(59624),m=t(6289),Z=t(74294),p=t(45705),v=t(59491),h=t(2717),f=t(5170),x=t(47515),j=t(82138),g=t(17101),y=t(90954),b=t(24511),k=t(97421),q=t(58467),I=t(89281),w=t(51282),S=t(55940),N=t(46417);n.Z=function(e){var n=e.prev,t=e.next,C=(0,b.$)().t,O=c.Z.useForm(),F=(0,l.Z)(O,1)[0],_=(0,h.I0)(),U=(0,q.UO)().uuid,L=(0,h.v9)((function(e){return e.menu}),h.wU).activeMenu,V=(0,s.useState)([]),E=(0,l.Z)(V,2),M=E[0],P=E[1],A=(0,s.useState)(null),T=(0,l.Z)(A,2),z=T[0],$=T[1],D=(0,s.useState)(null),W=(0,l.Z)(D,2),B=W[0],G=W[1];function K(e){var n,t,a=M.find((function(n){return n.extra_group_id===e}));return null===a||void 0===a||null===(n=a.group)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title}var X=function(e){var n,t={search:e,addon:1,shop_id:null===(n=L.data.shop)||void 0===n?void 0:n.value,stutus:"published"};return g.Z.getAll(t).then((function(e){return e.data.map((function(e){var n;return{label:null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,value:null===e||void 0===e?void 0:e.id}}))}))};return(0,s.useEffect)((function(){f.Z.getAllValues().then((function(e){var n=e.data;return P(n)})),function(e){G(!0),g.Z.getById(e).then((function(e){var n,t,l,s={extras:null===(n=e.data.stocks[0])||void 0===n?void 0:n.extras.map((function(e){return e.extra_group_id})),stocks:e.data.stocks.map((function(e){var n;return(0,i.Z)((0,i.Z)((0,i.Z)({},e),Object.assign.apply(Object,[{}].concat((0,r.Z)(e.extras.map((function(e,n){return(0,a.Z)({},"extras[".concat(n,"]"),e.id)})))))),{},{addons:null===e||void 0===e||null===(n=e.addons)||void 0===n?void 0:n.map((function(e){var n,t,a;return{label:null===e||void 0===e||null===(n=e.product)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title,value:null===e||void 0===e||null===(a=e.product)||void 0===a?void 0:a.id}})),quantity:e.quantity||0,extras:void 0})}))};F.setFieldsValue({stocks:null!==(t=e.data)&&void 0!==t&&null!==(l=t.stocks)&&void 0!==l&&l.length?s.stocks:[""]})})).finally((function(){G(!1)}))}(U)}),[]),(0,N.jsx)(u.Z,{children:B?(0,N.jsx)(w.Z,{}):(0,N.jsxs)(c.Z,{layout:"vertical",form:F,onFinish:function(e){var n,a;$(!0);var r,i=e.stocks;r=!(null===(n=L.data)||void 0===n||null===(a=n.extras)||void 0===a||!a.length)?i.map((function(e){var n,t;return{price:e.price,quantity:e.quantity,ids:null===(n=L.data)||void 0===n?void 0:n.extras.map((function(n,t){return e["extras[".concat(t,"]")]})),addons:e.addons?null===(t=e.addons)||void 0===t?void 0:t.map((function(e){return e.value})):[]}})):[{price:i[0].price,quantity:i[0].quantity,addons:i[0].addons?i[0].addons.map((function(e){return e.value})):[]}],g.Z.stocks(U,{extras:r}).then((function(){return t()})).finally((function(){return $(!1)}))},children:[(0,N.jsx)(c.Z.List,{name:"stocks",children:function(e,n){var t,a,r=n.add,l=n.remove;return(0,N.jsxs)("div",{children:[e.map((function(e,n){var t,a,r,i;return(0,N.jsxs)(o.Z,{gutter:12,align:"middle",style:{flexWrap:"nowrap",overflowX:"auto"},hidden:!(null!==(t=L.data)&&void 0!==t&&null!==(a=t.extras)&&void 0!==a&&a.length)&&e.key,children:[(0,N.jsx)(d.Z,{children:(0,N.jsx)(c.Z.Item,{label:C("price"),name:[n,"price"],rules:[{required:!0,message:C("required")}],children:(0,N.jsx)(m.Z,{min:1,className:"w-100",style:{minWidth:200}})})}),(0,N.jsx)(d.Z,{children:(0,N.jsx)(c.Z.Item,{label:C("quantity"),name:[n,"quantity"],rules:[{required:!0,message:C("required")}],children:(0,N.jsx)(m.Z,{min:1,className:"w-100",style:{minWidth:200}})})}),(0,N.jsx)(d.Z,{children:(0,N.jsx)(c.Z.Item,{label:C("addons"),name:[n,"addons"],rules:[{required:!1,message:C("required")}],children:(0,N.jsx)(I.h,{mode:"multiple",style:{minWidth:"300px"},fetchOptions:X,allowClear:!0})})}),null===(r=L.data)||void 0===r||null===(i=r.extras)||void 0===i?void 0:i.map((function(e,t){return(0,N.jsx)(d.Z,{children:(0,N.jsx)(c.Z.Item,{label:K(e),name:[n,"extras[".concat(t,"]")],rules:[{required:!0,message:C("required")}],children:(0,N.jsx)(Z.Z,{className:"w-100",style:{minWidth:200},children:M.filter((function(n){return n.extra_group_id===e})).map((function(e){return(0,N.jsx)(Z.Z.Option,{value:e.id,children:(0,N.jsxs)(p.Z,{children:["color"===e.group.type&&(0,N.jsx)("div",{className:"extra-color-wrapper-contain",style:{backgroundColor:e.value}}),"image"===e.group.type?null:e.value,"image"===e.group.type&&(0,N.jsx)("img",{src:k.bV+e.value,alt:e.value,className:"extra-img-wrapper-contain"})]})},e.id)}))})})},"extra"+e)})),(0,N.jsx)(d.Z,{children:e.key?(0,N.jsx)(S.Z,{type:"primary",className:"mt-2",danger:!0,icon:(0,N.jsx)(x.Z,{}),onClick:function(){return l(e.name)}}):""})]},e.key)})),null!==(t=L.data)&&void 0!==t&&null!==(a=t.extras)&&void 0!==a&&a.length?(0,N.jsx)(v.Z,{type:"dashed",style:{width:"100%"},onClick:function(){r(),function(){var e=F.getFieldsValue(!0);_((0,y.nc)({activeMenu:L,data:(0,i.Z)((0,i.Z)({},L.data),{},{stocks:e.stocks})}))}()},children:(0,N.jsxs)(p.Z,{children:[(0,N.jsx)(j.Z,{}),C("add")]})}):""]})}}),(0,N.jsxs)(p.Z,{className:"mt-4",children:[(0,N.jsx)(v.Z,{onClick:n,children:C("prev")}),(0,N.jsx)(v.Z,{type:"primary",htmlType:"submit",loading:!!z,children:C("next")})]})]})})}},97307:function(e,n,t){var a=t(74165),r=t(4942),i=t(93433),l=t(15861),s=t(1413),c=t(29439),u=t(47313),o=t(18197),d=t(68197),m=t(59624),Z=t(77181),p=t(66672),v=t(6289),h=t(86345),f=t(74294),x=t(59491),j=t(89281),g=t(53149),y=t(11216),b=t(30763),k=t(2717),q=t(17101),I=t(90954),w=t(31055),S=t(58467),N=t(32380),C=t(24511),O=t(5764),F=t(49080),_=t(46417);n.Z=function(e){var n,t,U,L=e.next,V=e.action_type,E=void 0===V?"":V,M=(0,C.$)().t,P=o.Z.useForm(),A=(0,c.Z)(P,1)[0],T=(0,k.I0)(),z=(0,S.UO)().uuid,$=(0,S.s0)(),D=(0,u.useState)(null),W=(0,c.Z)(D,2),B=W[0],G=W[1],K=(0,k.v9)((function(e){return e.menu}),k.wU).activeMenu,X=(0,k.v9)((function(e){return e.formLang}),k.wU),H=X.defaultLang,J=X.languages,Q=(0,u.useState)(null!==(n=K.data)&&void 0!==n&&n.images?null===(t=K.data)||void 0===t?void 0:t.images:[]),R=(0,c.Z)(Q,2),Y=R[0],ee=R[1],ne=(0,u.useState)(!1),te=(0,c.Z)(ne,2),ae=te[0],re=te[1],ie=(0,u.useState)([]),le=(0,c.Z)(ie,2),se=le[0],ce=le[1],ue=(0,u.useState)(Boolean(null===(U=K.data)||void 0===U?void 0:U.kcal)),oe=(0,c.Z)(ue,2),de=oe[0],me=oe[1];function Ze(){return(Ze=(0,l.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n},e.abrupt("return",g.Z.get(t).then((function(e){return e.data.map((function(e){return{label:e.translation?e.translation.title:"no name",value:e.id}}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(){return(pe=(0,l.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y.Z.search(n).then((function(e){return e.data.map((function(e){return{label:e.title,value:e.id}}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(){return(ve=(0,l.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={perPage:100,type:"main"},e.abrupt("return",b.Z.getAll(n).then((function(e){return e.data.map((function(e){var n;return{title:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id,key:e.id}}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,u.useEffect)((function(){return function(){var e=A.getFieldsValue(!0);T((0,I.nc)({activeMenu:K,data:(0,s.Z)((0,s.Z)({},K.data),e)}))}}),[]);return(0,u.useEffect)((function(){w.Z.getAll({perPage:100,page:1,active:1}).then((function(e){var n=e.data;return ce(function(e){return e.map((function(e){var n;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id}}))}(n))}))}),[]),(0,_.jsxs)(o.Z,{layout:"vertical",form:A,initialValues:(0,s.Z)({active:!0,vegetarian:!0},K.data),onFinish:function(e){var n,t,a,l;re(!0);var c=(0,s.Z)((0,s.Z)({},e),{},{active:Number(e.active),vegetarian:Number(e.vegetarian),brand_id:null===(n=e.brand)||void 0===n?void 0:n.value,category_id:null===(t=e.category)||void 0===t?void 0:t.value,shop_id:null===(a=e.shop)||void 0===a?void 0:a.value,unit_id:null===(l=e.unit)||void 0===l?void 0:l.value,kcal:de?String(e.kcal):void 0,carbs:de?String(e.carbs):void 0,protein:de?String(e.protein):void 0,fats:de?String(e.fats):void 0,images:void 0,brand:void 0,category:void 0,shop:void 0,unit:void 0},Object.assign.apply(Object,[{}].concat((0,i.Z)(Y.map((function(e,n){return(0,r.Z)({},"images[".concat(n,"]"),e.name)}))))));"edit"===E?function(e,n){q.Z.update(z,n).then((function(){T((0,I.nc)({activeMenu:K,data:e})),L()})).catch((function(e){return G(e.response.data.params)})).finally((function(){return re(!1)}))}(e,c):function(e,n){q.Z.create(n).then((function(n){var t=n.data;T((0,I.SS)({id:"product-".concat(t.uuid),url:"product/".concat(t.uuid),name:M("add.product"),data:e,refetch:!1})),$("/product/".concat(t.uuid,"/?step=1"))})).catch((function(e){return G(e.response.data.params)})).finally((function(){return re(!1)}))}(e,c)},children:[(0,_.jsxs)(d.Z,{gutter:12,children:[(0,_.jsx)(m.Z,{span:16,children:(0,_.jsxs)(d.Z,{children:[(0,_.jsx)(m.Z,{span:24,children:(0,_.jsx)(Z.Z,{title:M("basic.info"),children:(0,_.jsxs)(d.Z,{children:[(0,_.jsx)(m.Z,{span:24,children:J.map((function(e){return(0,_.jsx)(o.Z.Item,{label:M("name"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===H,message:M("required")}],hidden:e.locale!==H,children:(0,_.jsx)(p.Z,{})},"name"+e.id)}))}),(0,_.jsx)(m.Z,{span:24,children:J.map((function(e){return(0,_.jsx)(o.Z.Item,{label:M("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===H,message:M("required")}],hidden:e.locale!==H,children:(0,_.jsx)(F.Z,{rows:3})},"description"+e.id)}))})]})})}),(0,_.jsx)(m.Z,{span:24,children:(0,_.jsx)(Z.Z,{title:M("pricing"),children:(0,_.jsxs)(d.Z,{gutter:12,children:[(0,_.jsx)(m.Z,{span:6,children:(0,_.jsx)(o.Z.Item,{label:M("min.qty"),name:"min_qty",rules:[{required:!0,message:M("required")}],children:(0,_.jsx)(v.Z,{min:0,className:"w-100"})})}),(0,_.jsx)(m.Z,{span:6,children:(0,_.jsx)(o.Z.Item,{label:M("max.qty"),name:"max_qty",rules:[{required:!0,message:M("required")}],children:(0,_.jsx)(v.Z,{min:0,className:"w-100"})})}),(0,_.jsx)(m.Z,{span:6,children:(0,_.jsx)(o.Z.Item,{label:M("tax"),name:"tax",rules:[{required:!0,message:M("required")}],children:(0,_.jsx)(v.Z,{min:0,className:"w-100",addonAfter:"%"})})}),(0,_.jsx)(m.Z,{span:6,children:(0,_.jsx)(o.Z.Item,{label:M("qr.code"),name:"bar_code",rules:[{required:!0,message:M("required")}],help:null!==B&&void 0!==B&&B.bar_code?B.bar_code[0]:null,validateStatus:null!==B&&void 0!==B&&B.bar_code?"error":"success",children:(0,_.jsx)(p.Z,{className:"w-100"})})})]})})}),(0,_.jsx)(m.Z,{span:24,children:(0,_.jsx)(Z.Z,{title:M("additions"),children:(0,_.jsxs)(d.Z,{gutter:12,children:[(0,_.jsx)(m.Z,{span:6,children:(0,_.jsx)(o.Z.Item,{label:M("active"),name:"active",valuePropName:"checked",children:(0,_.jsx)(h.Z,{})})}),(0,_.jsx)(m.Z,{span:6,children:(0,_.jsx)(o.Z.Item,{label:M("vegetarian"),name:"vegetarian",valuePropName:"checked",children:(0,_.jsx)(h.Z,{})})}),(0,_.jsx)(m.Z,{span:6,children:(0,_.jsx)(o.Z.Item,{label:M("nutrition.".concat(de?"on":"off")),valuePropName:"checked",children:(0,_.jsx)(h.Z,{checked:de,onChange:function(e){return me(e)}})})})]})})}),de&&(0,_.jsx)(m.Z,{span:24,children:(0,_.jsx)(Z.Z,{title:M("nutritional.value.of.food"),children:(0,_.jsxs)(d.Z,{gutter:12,children:[(0,_.jsx)(m.Z,{span:6,children:(0,_.jsx)(o.Z.Item,{rules:[{required:!0,message:M("required")}],label:M("kcal"),name:"kcal",children:(0,_.jsx)(v.Z,{max:10,className:"w-100"})})}),(0,_.jsx)(m.Z,{span:6,children:(0,_.jsx)(o.Z.Item,{rules:[{required:!0,message:M("required")}],label:M("carbs"),name:"carbs",children:(0,_.jsx)(v.Z,{max:10,className:"w-100"})})}),(0,_.jsx)(m.Z,{span:6,children:(0,_.jsx)(o.Z.Item,{rules:[{required:!0,message:M("required")}],label:M("protein"),name:"protein",children:(0,_.jsx)(v.Z,{max:10,className:"w-100"})})}),(0,_.jsx)(m.Z,{span:6,children:(0,_.jsx)(o.Z.Item,{rules:[{required:!0,message:M("required")}],label:M("fats"),name:"fats",children:(0,_.jsx)(v.Z,{max:10,className:"w-100"})})})]})})})]})}),(0,_.jsx)(m.Z,{span:8,children:(0,_.jsxs)(d.Z,{children:[(0,_.jsx)(m.Z,{span:24,children:(0,_.jsx)(Z.Z,{title:M("organization"),children:(0,_.jsxs)(d.Z,{children:[(0,_.jsx)(m.Z,{span:24,children:(0,_.jsx)(o.Z.Item,{label:M("shop/restaurant"),name:"shop",rules:[{required:!0,message:M("required")}],children:(0,_.jsx)(j.h,{fetchOptions:function(e){return Ze.apply(this,arguments)},disabled:"edit"===E})})}),(0,_.jsx)(m.Z,{span:24,children:(0,_.jsx)(o.Z.Item,{label:M("category"),name:"category",rules:[{required:!0,message:M("required")}],children:(0,_.jsx)(N.o,{fetchOptions:function(){return ve.apply(this,arguments)}})})}),(0,_.jsx)(m.Z,{span:24,children:(0,_.jsx)(o.Z.Item,{label:M("brand"),name:"brand",rules:[{required:!1,message:M("required")}],children:(0,_.jsx)(j.h,{fetchOptions:function(e){return pe.apply(this,arguments)}})})}),(0,_.jsx)(m.Z,{span:24,children:(0,_.jsx)(o.Z.Item,{label:M("unit"),name:"unit",rules:[{required:!0,message:M("required")}],children:(0,_.jsx)(f.Z,{labelInValue:!0,filterOption:!1,options:se})})})]})})}),(0,_.jsx)(m.Z,{span:24,children:(0,_.jsx)(Z.Z,{title:M("media"),children:(0,_.jsx)(d.Z,{children:(0,_.jsx)(m.Z,{span:24,children:(0,_.jsx)(o.Z.Item,{name:"images",children:(0,_.jsx)(O.Z,{type:"products",imageList:Y,setImageList:ee,form:A,multiple:!0})})})})})})]})})]}),(0,_.jsx)(x.Z,{type:"primary",htmlType:"submit",loading:ae,children:M("next")})]})}},96077:function(e,n,t){t.d(n,{S:function(){return a}});var a=[{title:"food",content:"First-content"},{title:"food.extras",content:"Second-content"},{title:"stocks",content:"Third-content"},{title:"food.property",content:"Fourth-content"},{title:"finish",content:"Finish-content"}]}}]);