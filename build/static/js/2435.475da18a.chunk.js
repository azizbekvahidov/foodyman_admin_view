"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2435],{84017:function(e,i,s){function l(e){return e?(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$")+" "+Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):"0"}s.d(i,{Z:function(){return l}})},92435:function(e,i,s){s.r(i),s.d(i,{default:function(){return R}});var l=s(29439),n=s(47313),d=s(78891),r=s(77181),t=s(45705),o=s(59491),a=s(68197),c=s(59624),u=s(56140),v=s(14133),x=s(83999),m=s(72652),j=s(66204),h=s(78508),p=s(45334),Z=s(41068),f=s(89720),y=s(12019),N=s(58467),b=s(2135),g=s(45464),_=s(2717),w=s(90954),k=s(1413),I=s(18197),q=s(84695),z=s(74294),C=s(24511),Y=s(49319),B=s(49080),D=s(34491),M=s(46417);function S(e){var i=e.orderDetails,s=e.handleCancel,d=e.status,r=(0,_.v9)((function(e){return e.menu}),_.wU).activeMenu,t=I.Z.useForm(),u=(0,l.Z)(t,1)[0],v=(0,_.I0)(),x=(0,C.$)().t,m=(0,n.useState)(!1),j=(0,l.Z)(m,2),h=j[0],p=j[1],Z=(0,n.useState)(i.status),f=(0,l.Z)(Z,2),y=f[0],N=f[1];return(0,M.jsx)(q.Z,{visible:!!i,title:x("refund"),closable:!1,footer:[(0,M.jsx)(o.Z,{type:"primary",onClick:function(){return u.submit()},loading:h,children:x("save")},"save-form"),(0,M.jsx)(o.Z,{type:"default",onClick:s,children:x("cancel")},"cansel-modal")],children:(0,M.jsx)(I.Z,{form:u,layout:"vertical",onFinish:function(e){p(!0);var l=(0,k.Z)({},e);Y.Z.update(i.id,l).then((function(){s(),v((0,w.xo)(r))})).catch((function(e){return D.Am.error(e.message)})).finally((function(){return p(!1)}))},initialValues:{status:i.status},children:(0,M.jsx)(a.Z,{gutter:12,children:(0,M.jsxs)(c.Z,{span:24,children:[(0,M.jsx)(I.Z.Item,{label:x("status"),name:"status",rules:[{required:!0,message:x("required")}],children:(0,M.jsx)(z.Z,{onChange:function(e){return N(e)},children:d.map((function(e,i){return(0,M.jsx)(z.Z.Option,{value:e,children:x(e)},i)}))})}),"accepted"!==y&&(0,M.jsx)(I.Z.Item,{label:x("answer"),name:"answer",rules:[{required:!0,message:x("required")}],children:(0,M.jsx)(B.Z,{rows:4})})]})})})})}var T=s(94291),U=s(84017),A=s(40197),V=s(22539),F=s(32916),$=s(97421),G=s(58821),E=s(5958),J=s(70816),O=s.n(J),Q=["pending","accepted","canceled"];function R(){var e,i,s,k,I,q,z,B,D,J,R,H,K,L,X,P,W,ee,ie,se,le,ne,de,re,te,oe,ae,ce,ue,ve,xe,me,je,he,pe,Ze,fe,ye=(0,_.v9)((function(e){return e.menu}),_.wU).activeMenu,Ne=(0,_.v9)((function(e){return e.currency}),_.wU).defaultCurrency,be=null===ye||void 0===ye||null===(e=ye.data)||void 0===e?void 0:e.order,ge=(0,C.$)().t,_e=(0,N.UO)().id,we=(0,_.I0)(),ke=(0,n.useRef)(),Ie=(0,n.useRef)(),qe=(0,n.useState)(!1),ze=(0,l.Z)(qe,2),Ce=ze[0],Ye=ze[1],Be=(0,n.useState)(null),De=(0,l.Z)(Be,2),Me=De[0],Se=De[1],Te=(0,_.v9)((function(e){return e.orderStatus}),_.wU).statusList,Ue=[{title:ge("id"),dataIndex:"id",key:"id",render:function(e,i){var s;return null===(s=i.stock)||void 0===s?void 0:s.id}},{title:ge("product.name"),dataIndex:"product",key:"product",render:function(e,i){var s,l,n;return null===(s=i.stock)||void 0===s||null===(l=s.product)||void 0===l||null===(n=l.translation)||void 0===n?void 0:n.title}},{title:ge("image"),dataIndex:"img",key:"img",render:function(e,i){var s,l;return(0,M.jsx)(d.Z,{src:(0,g.Z)(null===(s=i.stock)||void 0===s||null===(l=s.product)||void 0===l?void 0:l.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:ge("price"),dataIndex:"origin_price",key:"origin_price",render:function(e,i){return(0,U.Z)(null===i||void 0===i?void 0:i.origin_price,null===Ne||void 0===Ne?void 0:Ne.symbol)}},{title:ge("quantity"),dataIndex:"quantity",key:"quantity"},{title:ge("discount"),dataIndex:"discount",key:"discount",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;return(0,U.Z)(e/i.quantity,null===Ne||void 0===Ne?void 0:Ne.symbol)}},{title:ge("tax"),dataIndex:"tax",key:"tax",render:function(e,i){return(0,U.Z)(e/i.quantity,null===Ne||void 0===Ne?void 0:Ne.symbol)}},{title:ge("total.price"),dataIndex:"total_price",key:"total_price",render:function(e,i){return(0,U.Z)(null===i||void 0===i?void 0:i.total_price,null===Ne||void 0===Ne?void 0:Ne.symbol)}}],Ae=[{title:ge("date"),dataIndex:"date",key:"date"},{title:ge("document"),dataIndex:"document",key:"document"},{title:ge("number"),dataIndex:"number",key:"number"},{title:ge("total.price"),dataIndex:"price",key:"price"}],Ve=[{price:(0,U.Z)(null===be||void 0===be?void 0:be.total_price,null===Ne||void 0===Ne?void 0:Ne.symbol),number:(0,M.jsxs)(b.rU,{to:"/orders/generate-invoice/".concat(null===be||void 0===be?void 0:be.id),children:["#",null===be||void 0===be?void 0:be.id]}),document:ge("invoice"),date:null===be||void 0===be?void 0:be.delivery_date},{price:"-",number:(0,M.jsxs)(b.rU,{to:"/orders/generate-invoice/".concat(null===be||void 0===be?void 0:be.id),children:["#",null===be||void 0===be?void 0:be.id]}),document:ge("delivery.reciept"),date:null===be||void 0===be?void 0:be.delivery_date}];return(0,n.useEffect)((function(){ye.refetch&&(Ye(!0),Y.Z.getById(_e).then((function(e){var i=e.data;we((0,w.nc)({activeMenu:ye,data:i}))})).finally((function(){Ye(!1),we((0,w.A_)(ye))})),we((0,A.dX)()),we((0,T.ES)()))}),[ye.refetch]),(0,M.jsxs)("div",{className:"order_details",children:[(0,M.jsx)(r.Z,{className:"order-details-info",title:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(F.Qyq,{className:"mr-2 icon"}),"".concat(ge("order")," ").concat(null!==be&&void 0!==be&&be.id?"#".concat(null===be||void 0===be?void 0:be.id," "):"")," ",ge("from.order")," ",null===be||void 0===be||null===(i=be.user)||void 0===i?void 0:i.firstname," ",(null===be||void 0===be||null===(s=be.user)||void 0===s?void 0:s.lastname)||""]}),extra:"delivered"!==(null===be||void 0===be?void 0:be.status)&&"canceled"!==(null===be||void 0===be?void 0:be.status)?(0,M.jsx)(t.Z,{children:"delivered"!==(null===be||void 0===be?void 0:be.status)&&"canceled"!==(null===be||void 0===be?void 0:be.status)?(0,M.jsx)(o.Z,{type:"primary",onClick:function(){return Se(be)},children:ge("change.status")}):null}):""}),(0,M.jsxs)(a.Z,{gutter:24,children:[(0,M.jsx)(c.Z,{span:24,children:(0,M.jsx)(r.Z,{children:(0,M.jsxs)(t.Z,{className:"justify-content-between w-100",children:[(0,M.jsxs)(t.Z,{className:"align-items-start",children:[(0,M.jsx)(f.Z,{className:"order-card-icon"}),(0,M.jsxs)("div",{className:"d-flex flex-column",children:[(0,M.jsx)(u.Z.Text,{children:ge("delivery.date")}),Ce?(0,M.jsx)(v.Z.Button,{size:16}):(0,M.jsxs)(u.Z.Text,{className:"order-card-title",children:[null===be||void 0===be?void 0:be.delivery_date," ",null===be||void 0===be?void 0:be.delivery_time]})]})]}),(0,M.jsxs)(t.Z,{className:"align-items-start",onClick:function(){return Ie.current.scrollIntoView({behavior:"smooth"})},children:[(0,M.jsx)(E.iFN,{className:"order-card-icon"}),(0,M.jsxs)("div",{className:"d-flex flex-column",children:[(0,M.jsx)(u.Z.Text,{children:ge("total.price")}),Ce?(0,M.jsx)(v.Z.Button,{size:16,loading:Ce}):(0,M.jsx)(u.Z.Text,{className:"order-card-title",children:(0,U.Z)(null===be||void 0===be?void 0:be.total_price,null===Ne||void 0===Ne?void 0:Ne.symbol)})]})]}),(0,M.jsxs)(t.Z,{className:"align-items-start",children:[(0,M.jsx)(E.Dij,{className:"order-card-icon"}),(0,M.jsxs)("div",{className:"d-flex flex-column",children:[(0,M.jsx)(u.Z.Text,{children:ge("messages")}),Ce?(0,M.jsx)(v.Z.Button,{size:16}):(0,M.jsx)(u.Z.Text,{className:"order-card-title",children:null!==be&&void 0!==be&&be.review?1:0})]})]}),(0,M.jsxs)(t.Z,{className:"align-items-start",onClick:function(){return ke.current.scrollIntoView({behavior:"smooth"})},children:[(0,M.jsx)(F.Qyq,{className:"order-card-icon"}),(0,M.jsxs)("div",{className:"d-flex flex-column",children:[(0,M.jsx)(u.Z.Text,{children:ge("products")}),Ce?(0,M.jsx)(v.Z.Button,{size:16}):(0,M.jsx)(u.Z.Text,{className:"order-card-title",children:null===be||void 0===be||null===(k=be.details)||void 0===k?void 0:k.reduce((function(e,i){return e+i.quantity}),0)})]})]})]})})}),"canceled"!==(null===be||void 0===be?void 0:be.status)&&(0,M.jsx)(c.Z,{span:24,children:(0,M.jsx)(r.Z,{children:(0,M.jsx)(x.Z,{current:null===Te||void 0===Te?void 0:Te.findIndex((function(e){return e.name===(null===be||void 0===be?void 0:be.status)})),children:null===Te||void 0===Te?void 0:Te.slice(0,-1).map((function(e){return(0,M.jsx)(x.Z.Step,{title:ge(e.name)},e.id)}))})})}),(0,M.jsxs)(c.Z,{span:16,children:[(0,M.jsx)(m.Z,{spinning:Ce,children:(0,M.jsx)(r.Z,{style:{minHeight:"200px"},children:(0,M.jsxs)(a.Z,{hidden:Ce,className:"mb-3 order_detail",children:[(0,M.jsxs)(c.Z,{span:12,children:[(0,M.jsxs)("div",{children:[ge("created.date.&.time"),":",(0,M.jsxs)("span",{className:"ml-2",children:[(0,M.jsx)(G.yoA,{className:"mr-1"})," ",O()(null===be||void 0===be?void 0:be.created_at).format("YYYY-MM-DD hh:mm")," "]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)("div",{children:[ge("delivery.date.&.time"),":",(0,M.jsxs)("span",{className:"ml-2",children:[(0,M.jsx)(G.yoA,{className:"mr-1"})," ",null===be||void 0===be?void 0:be.delivery_date," ",null===be||void 0===be?void 0:be.delivery_time]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)("div",{children:[ge("payment.status"),":",(0,M.jsx)("span",{className:"ml-2",children:ge(null===be||void 0===be||null===(I=be.transaction)||void 0===I?void 0:I.status)})]}),(0,M.jsx)("br",{}),(0,M.jsxs)("div",{children:[ge("cause"),":",(0,M.jsx)("span",{className:"ml-2",style:{color:"red"},children:null===(q=ye.data)||void 0===q?void 0:q.cause})]}),(0,M.jsx)("br",{}),(0,M.jsxs)("div",{children:[ge("answer"),":",(0,M.jsx)("span",{className:"ml-2",children:null===(z=ye.data)||void 0===z?void 0:z.answer})]})]}),(0,M.jsxs)(c.Z,{span:12,children:[(0,M.jsxs)("div",{children:[ge("status"),":",(0,M.jsxs)("span",{className:"ml-2",children:["pending"===(null===(B=ye.data)||void 0===B?void 0:B.status)?(0,M.jsx)(j.Z,{color:"blue",children:ge(null===(D=ye.data)||void 0===D?void 0:D.status)}):"canceled"===(null===(J=ye.data)||void 0===J?void 0:J.status)?(0,M.jsx)(j.Z,{color:"error",children:ge(null===(R=ye.data)||void 0===R?void 0:R.status)}):(0,M.jsx)(j.Z,{color:"cyan",children:ge(null===(H=ye.data)||void 0===H?void 0:H.status)}),"canceled"!==(null===(K=ye.data)||void 0===K?void 0:K.status)&&(0,M.jsx)(y.Z,{onClick:function(){return Se(null===ye||void 0===ye?void 0:ye.data)}})]})]}),(0,M.jsx)("br",{}),(0,M.jsxs)("div",{children:[ge("delivery.type"),":",(0,M.jsx)("span",{className:"ml-2",children:null===be||void 0===be?void 0:be.delivery_type})]}),(0,M.jsx)("br",{}),(0,M.jsxs)("div",{children:[ge("payment.type"),":",(0,M.jsx)("span",{className:"ml-2",children:ge(null===be||void 0===be||null===(L=be.transaction)||void 0===L||null===(X=L.payment_system)||void 0===X?void 0:X.tag)})]}),(0,M.jsx)("br",{}),(0,M.jsxs)("div",{children:[ge("address"),":",(0,M.jsx)("span",{className:"ml-2",children:null===be||void 0===be||null===(P=be.address)||void 0===P?void 0:P.address})]})]})]})})}),(0,M.jsx)(r.Z,{title:ge("documents"),children:(0,M.jsx)(h.Z,{columns:Ae,dataSource:Ve||[],pagination:!1,loading:Ce})}),(0,M.jsxs)(r.Z,{className:"w-100 order-table",children:[(0,M.jsx)(h.Z,{ref:ke,scroll:{x:!0},columns:Ue,dataSource:(null===(W=ye.data)||void 0===W||null===(ee=W.order)||void 0===ee?void 0:ee.details)||[],loading:Ce,rowKey:function(e){return e.id},pagination:!1}),(0,M.jsxs)(t.Z,{size:100,className:"d-flex justify-content-end w-100 order-table__summary",children:[(0,M.jsxs)("div",{children:[(0,M.jsxs)("span",{children:[ge("delivery.fee"),":"]}),(0,M.jsx)("br",{}),(0,M.jsxs)("span",{children:[ge("order.tax"),":"]}),(0,M.jsx)("br",{}),(0,M.jsxs)("span",{children:[ge("product"),":"]}),(0,M.jsx)("br",{}),(0,M.jsxs)("span",{children:[ge("coupon"),":"]}),(0,M.jsx)("br",{}),(0,M.jsxs)("span",{children:[ge("discount"),":"]}),(0,M.jsx)("br",{}),(0,M.jsxs)("h3",{children:[ge("total.price"),":"]})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("span",{children:(0,U.Z)(null===be||void 0===be?void 0:be.delivery_fee,null===Ne||void 0===Ne?void 0:Ne.symbol)}),(0,M.jsx)("br",{}),(0,M.jsx)("span",{children:(0,U.Z)(null===be||void 0===be?void 0:be.tax,null===Ne||void 0===Ne?void 0:Ne.symbol)}),(0,M.jsx)("br",{}),(0,M.jsx)("span",{children:(0,U.Z)(null===be||void 0===be||null===(ie=be.details)||void 0===ie?void 0:ie.reduce((function(e,i){return e+i.total_price}),0),null===Ne||void 0===Ne?void 0:Ne.symbol)}),(0,M.jsx)("br",{}),(0,M.jsx)("span",{children:(0,U.Z)(null===be||void 0===be||null===(se=be.coupon)||void 0===se?void 0:se.price,null===Ne||void 0===Ne?void 0:Ne.symbol)}),(0,M.jsx)("br",{}),(0,M.jsx)("span",{children:(0,U.Z)(null===be||void 0===be?void 0:be.total_discount,null===Ne||void 0===Ne?void 0:Ne.symbol)}),(0,M.jsx)("br",{}),(0,M.jsx)("h3",{ref:Ie,children:(0,U.Z)(null===be||void 0===be?void 0:be.total_price,null===Ne||void 0===Ne?void 0:Ne.symbol)})]})]})]})]}),(0,M.jsxs)(c.Z,{span:8,className:"order_info",children:["ready"===(null===be||void 0===be?void 0:be.status)&&"pickup"!==(null===be||void 0===be?void 0:be.delivery_type)&&(0,M.jsx)(r.Z,{title:ge("deliveryman"),extra:"ready"===(null===be||void 0===be?void 0:be.status)&&"pickup"!==(null===be||void 0===be?void 0:be.delivery_type)&&(0,M.jsxs)(o.Z,{children:[ge("change"),(0,M.jsx)(y.Z,{})]}),children:(null===be||void 0===be?void 0:be.deliveryman)&&(0,M.jsxs)(t.Z,{children:[(0,M.jsx)(p.C,{shape:"square",size:64,src:$.bV+(null===be||void 0===be||null===(le=be.deliveryman)||void 0===le?void 0:le.img)}),(0,M.jsxs)("div",{children:[(0,M.jsxs)("h5",{children:[null===be||void 0===be||null===(ne=be.deliveryman)||void 0===ne?void 0:ne.firstname," ",(null===be||void 0===be||null===(de=be.deliveryman)||void 0===de?void 0:de.lastname)||""]}),(0,M.jsxs)("span",{className:"delivery-info",children:[(0,M.jsx)(G.lfG,{}),null===be||void 0===be||null===(re=be.deliveryman)||void 0===re?void 0:re.phone]}),(0,M.jsxs)("div",{className:"delivery-info",children:[(0,M.jsx)("b",{children:(0,M.jsx)(V.ixJ,{size:16})}),(0,M.jsx)("span",{children:null===be||void 0===be||null===(te=be.deliveryman)||void 0===te?void 0:te.email})]})]})]})}),(0,M.jsx)(r.Z,{title:(0,M.jsx)(t.Z,{children:ge("customer.info")}),children:(0,M.jsxs)("div",{className:"d-flex w-100 customer-info-container",children:[Ce?(0,M.jsx)(v.Z.Avatar,{size:64,shape:"square"}):(0,M.jsx)(p.C,{shape:"square",size:64,src:$.bV+(null===be||void 0===be||null===(oe=be.deliveryman)||void 0===oe?void 0:oe.img)}),(0,M.jsx)("h5",{className:"customer-name",children:Ce?(0,M.jsx)(v.Z.Button,{size:20,style:{width:70}}):(null===be||void 0===be||null===(ae=be.user)||void 0===ae?void 0:ae.firstname)+" "+((null===be||void 0===be||null===(ce=be.user)||void 0===ce?void 0:ce.lastname)||"")}),(0,M.jsxs)("div",{className:"customer-info-detail",children:[(0,M.jsxs)("div",{className:"customer-info",children:[(0,M.jsx)("span",{className:"title",children:ge("phone")}),(0,M.jsxs)("span",{className:"description",children:[(0,M.jsx)(G.lfG,{}),Ce?(0,M.jsx)(v.Z.Button,{size:16}):(null===be||void 0===be||null===(ue=be.user)||void 0===ue?void 0:ue.phone)||"none"]})]}),(0,M.jsxs)("div",{className:"customer-info",children:[(0,M.jsx)("span",{className:"title",children:ge("email")}),(0,M.jsxs)("span",{className:"description",children:[(0,M.jsx)(V.ixJ,{}),Ce?(0,M.jsx)(v.Z.Button,{size:16}):null===be||void 0===be||null===(ve=be.user)||void 0===ve?void 0:ve.email]})]}),(0,M.jsxs)("div",{className:"customer-info",children:[(0,M.jsx)("span",{className:"title",children:ge("registration.date")}),(0,M.jsxs)("span",{className:"description",children:[(0,M.jsx)(G.yoA,{}),Ce?(0,M.jsx)(v.Z.Button,{size:16}):O()(null===be||void 0===be||null===(xe=be.user)||void 0===xe?void 0:xe.created_at).format("DD-MM-YYYY, hh:mm")]})]}),(0,M.jsxs)("div",{className:"customer-info",children:[(0,M.jsx)("span",{className:"title",children:ge("orders.count")}),(0,M.jsx)("span",{className:"description",children:Ce?(0,M.jsx)(v.Z.Button,{size:16}):(0,M.jsx)(Z.Z,{showZero:!0,style:{backgroundColor:"#3d7de3"},count:(null===be||void 0===be||null===(me=be.user)||void 0===me?void 0:me.orders_count)||0})})]}),(0,M.jsxs)("div",{className:"customer-info",children:[(0,M.jsx)("span",{className:"title",children:ge("spent.since.registration")}),(0,M.jsx)("span",{className:"description",children:Ce?(0,M.jsx)(v.Z.Button,{size:16}):(0,M.jsx)(Z.Z,{showZero:!0,style:{backgroundColor:"#48e33d"},count:(0,U.Z)(null===be||void 0===be||null===(je=be.user)||void 0===je?void 0:je.orders_sum_total_price,null===Ne||void 0===Ne?void 0:Ne.symbol)})})]})]})]})}),(null===be||void 0===be?void 0:be.review)&&!Ce&&(0,M.jsx)(r.Z,{title:ge("messages"),children:(0,M.jsxs)("div",{className:"order-message",children:[(0,M.jsx)("span",{className:"message",children:null===be||void 0===be?void 0:be.review.comment}),(0,M.jsx)(t.Z,{className:"w-100 justify-content-end",children:(0,M.jsx)("span",{className:"date",children:O()(null===be||void 0===be?void 0:be.review.created_at).format("YYYY-MM-DD hh:mm")})})]})}),(0,M.jsx)(r.Z,{title:ge("store.information"),children:Ce?(0,M.jsx)(v.Z,{avatar:!0,shape:"square",paragraph:{rows:2}}):(0,M.jsxs)(t.Z,{className:"w-100",children:[(0,M.jsx)(p.C,{shape:"square",size:64,src:$.bV+(null===be||void 0===be||null===(he=be.shop)||void 0===he?void 0:he.logo_img)}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h5",{children:null===be||void 0===be||null===(pe=be.shop)||void 0===pe?void 0:pe.translation.title}),(0,M.jsxs)("div",{className:"delivery-info",children:[(0,M.jsx)("b",{children:(0,M.jsx)(G.lfG,{})}),(0,M.jsx)("span",{children:null===be||void 0===be||null===(Ze=be.shop)||void 0===Ze?void 0:Ze.phone})]}),(0,M.jsxs)("div",{className:"delivery-info",children:[(0,M.jsx)("b",{children:(0,M.jsx)(E.pu9,{size:16})}),(0,M.jsx)("span",{children:null===be||void 0===be||null===(fe=be.shop)||void 0===fe?void 0:fe.price})]})]})]})})]})]}),Me&&(0,M.jsx)(S,{orderDetails:Me,handleCancel:function(){return Se(null)},status:Q})]})}}}]);