"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7149],{97149:function(t,e,n){n.r(e);var i=n(93433),a=n(4942),c=n(1413),u=n(29439),r=n(47313),s=n(58467),l=n(34491),o=n(83999),d=n(18197),f=n(77181),p=n(72652),g=n(97421),Z=n(2717),v=n(90954),m=n(24511),h=n(73431),y=n(65436),j=n(14241),b=n(46417),x=o.Z.Step;e.default=function(){var t,e,n,k=(0,m.$)().t,_=(0,Z.v9)((function(t){return t.menu}),Z.wU).activeMenu,S=(0,s.UO)().id,O=(0,Z.I0)(),w=(0,Z.v9)((function(t){return t.formLang}),Z.wU),F=w.defaultLang,U=(w.languages,(0,r.useState)((null===(t=_.data)||void 0===t?void 0:t.step)||0)),V=(0,u.Z)(U,2),I=V[0],M=V[1],N=(0,r.useState)(null!==(e=_.data)&&void 0!==e&&e.image?[null===(n=_.data)||void 0===n?void 0:n.image]:[]),q=(0,u.Z)(N,2),A=q[0],C=q[1],E=function(){M(I+1)},L=function(){M(I-1)},z=d.Z.useForm(),B=(0,u.Z)(z,1)[0],$=(0,s.s0)(),D=(0,r.useState)(!1),G=(0,u.Z)(D,2),H=G[0],J=G[1],K=(0,r.useState)(!1),P=(0,u.Z)(K,2),Q=P[0],R=P[1];(0,r.useEffect)((function(){return function(){var t=B.getFieldsValue(!0);O((0,v.nc)({activeMenu:_,data:t}))}}),[]);return(0,r.useEffect)((function(){_.refetch&&function(t){J(!0),j.Z.getById(t).then((function(t){var e,n,u=t.data;B.setFieldsValue((0,c.Z)((0,c.Z)({},u),{},{title:(0,a.Z)({},F,u.translation.title),description:(0,a.Z)({},F,u.translation.description),instruction:Object.assign.apply(Object,[{}].concat((0,i.Z)(u.instructions.map((function(t){return(0,a.Z)({},t.locale,t.title)}))))),ingredient:Object.assign.apply(Object,[{}].concat((0,i.Z)(u.ingredients.map((function(t){return(0,a.Z)({},t.locale,t.title)}))))),nutrition:null===(e=u.nutritions)||void 0===e?void 0:e.map((function(t){return(0,c.Z)({percentage:t.percentage.toString(),weight:t.weight},Object.assign.apply(Object,[{}].concat((0,i.Z)(t.translations.flatMap((function(t){return(0,a.Z)({},t.locale,t.title)}))))))})),category_id:{value:u.category.id,label:u.category.translation.title},stocks:u.stocks.map((function(t){return(0,c.Z)({stock_id:{value:t.id,label:t.product.translation.title}},t)}))})),C([(n=u.img,{name:n,url:g.bV+n})])})).finally((function(){J(!1),O((0,v.A_)(_))}))}(S)}),[_.refetch]),(0,b.jsx)(f.Z,{title:k("edit.recepe"),extra:(0,b.jsx)(h.Z,{}),children:H?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,b.jsx)(p.Z,{size:"large",className:"py-5"})}):(0,b.jsxs)(d.Z,{layout:"vertical",onFinish:function(t){B.validateFields();var e=(0,c.Z)((0,c.Z)({},t),{},{category_id:t.category_id.value,images:null===A||void 0===A?void 0:A.map((function(t){return t.name})),stocks:t.stocks.map((function(t){return{min_quantity:t.min_quantity,stock_id:t.stock_id.value}}))});R(!0);var n="seller/recept";j.Z.update(S,e).then((function(){l.Am.success(k("successfully.updated")),$("/".concat(n)),O((0,v.ph)((0,c.Z)((0,c.Z)({},_),{},{nextUrl:n})))})).finally((function(){return R(!1)}))},form:B,initialValues:(0,c.Z)({active:!0},_.data),children:[(0,b.jsx)(o.Z,{current:I,children:y.S.map((function(t){return(0,b.jsx)(x,{title:k(t.title)},t.title)}))}),y.S.map((function(t){var e=t.content;return(0,b.jsx)("div",{className:"steps-content ".concat(t.step!==I+1&&"hidden"),children:(0,b.jsx)(e,{next:E,prev:L,loading:Q,image:A,setImage:C})},t.title)}))]})})}}}]);