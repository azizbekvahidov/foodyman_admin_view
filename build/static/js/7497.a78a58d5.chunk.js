"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7497],{97388:function(e,n,r){r.d(n,{Z:function(){return f}});var a=r(74165),t=r(15861),s=r(29439),l=r(47313),i=r(16609),o=r(97421),u=r.p+"static/media/pin.0e41858db80c699cd8a2.png",d=r(31881),c=r.n(d);function m(e){return p.apply(this,arguments)}function p(){return p=(0,t.Z)((0,a.Z)().mark((function e(n){var r,t,s=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:o.kr,t={latlng:"".concat(null===n||void 0===n?void 0:n.lat,",").concat(null===n||void 0===n?void 0:n.lng),key:r},e.abrupt("return",c().get("https://maps.googleapis.com/maps/api/geocode/json",{params:t}).then((function(e){var n;return null===(n=e.data.results[0])||void 0===n?void 0:n.formatted_address})).catch((function(e){return"not found"})));case 3:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}var h=r(5958),v=r(46417);var f=(0,i.GoogleApiWrapper)({apiKey:o.kr})((function(e){var n=(0,l.useState)(),r=(0,s.Z)(n,2),d=r[0],c=r[1],p=function(){var n=(0,t.Z)((0,a.Z)().mark((function n(r,t,s){var l,i,u;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=s.latLng,i={lat:l.lat(),lng:l.lng()},e.setLocation(i),n.next=5,m(i,o.kr);case 5:u=n.sent,e.setAddress(u);case 7:case"end":return n.stop()}}),n)})));return function(e,r,a){return n.apply(this,arguments)}}(),f=function(){var n=(0,t.Z)((0,a.Z)().mark((function n(r){var t,s;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={lat:null===r||void 0===r?void 0:r.lat,lng:null===r||void 0===r?void 0:r.lng},e.setLocation(t),n.next=4,m(t,o.kr);case 4:s=n.sent,e.setAddress(s);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),Z=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.geolocation.getCurrentPosition((function(e){var n={lat:e.coords.latitude,lng:e.coords.longitude};c(n)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){Z()}),[]);for(var g=[{lat:Number(e.location.lat)||0,lng:Number(e.location.lng)||0}],x=new e.google.maps.LatLngBounds,j=0;j<g.length;j++)x.extend(g[j]);return(0,v.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,v.jsx)("button",{className:"map-button",type:"button",onClick:function(){Z(),f(d)},children:(0,v.jsx)(h.nDs,{})}),(0,v.jsx)(i.Map,{cursor:"pointer",onClick:p,google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,v.jsx)(i.Marker,{position:e.location,icon:{url:u,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},89281:function(e,n,r){r.d(n,{h:function(){return p}});var a=r(1413),t=r(29439),s=r(45987),l=r(47313),i=r(12279),o=r.n(i),u=r(74294),d=r(72652),c=r(46417),m=["fetchOptions","debounceTimeout"],p=function(e){var n=e.fetchOptions,r=e.debounceTimeout,i=void 0===r?400:r,p=(0,s.Z)(e,m),h=(0,l.useState)(!1),v=(0,t.Z)(h,2),f=v[0],Z=v[1],g=(0,l.useState)([]),x=(0,t.Z)(g,2),j=x[0],b=x[1],w=(0,l.useMemo)((function(){return o()((function(e){b([]),Z(!0),n(e).then((function(e){b(e),Z(!1)}))}),i)}),[n,i]);return(0,c.jsx)(u.Z,(0,a.Z)((0,a.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:w,notFoundContent:f?(0,c.jsx)(d.Z,{size:"small"}):"no results"},p),{},{options:j,onFocus:function(){j.length||w("")}}))}},17649:function(e,n,r){r.d(n,{Z:function(){return a}});r(97421);function a(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};var n=e.location.split(", ");return{lat:Number(null===n||void 0===n?void 0:n[0]),lng:Number(null===n||void 0===n?void 0:n[1])}}},68652:function(e,n,r){r.r(n),r.d(n,{default:function(){return T}});var a=r(74165),t=r(15861),s=r(1413),l=r(29439),i=r(47313),o=r(18197),u=r(77181),d=r(68197),c=r(59624),m=r(66672),p=r(6289),h=r(99096),v=r(74294),f=r(46155),Z=r(59491),g=r(58467),x=r(34491),j=r(2717),b=r(90954),w=r(49986),y=r(24511),q=r(70816),k=r.n(q),_=r(5764),I=r(89281),S=r(53149),N=r(84304),L=r(45321),C=r(17649),O=r(97388),F=r(46417),z=[{label:"Benzine",value:"benzine"},{label:"Diesel",value:"diesel"},{label:"Gas",value:"gas"},{label:"Motorbike",value:"motorbike"},{label:"Bike",value:"bike"},{label:"Foot",value:"foot"},{label:"Electric",value:"electric"}],M=function(e){var n=e.location,r=e.setLocation,a=e.form,t=e.image,s=e.setImage,l=(0,y.$)().t;return(0,F.jsxs)(d.Z,{gutter:12,children:[(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:l("brand"),name:"brand",rules:[{required:!0,message:l("required")}],children:(0,F.jsx)(m.Z,{})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:l("model"),name:"model",rules:[{required:!0,message:l("required")}],children:(0,F.jsx)(m.Z,{})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:l("type.of.technique"),name:"type_of_technique",rules:[{required:!0,message:l("required")}],children:(0,F.jsx)(v.Z,{options:z})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:l("car.number"),name:"number",rules:[{required:!0,message:l("required")}],children:(0,F.jsx)(m.Z,{})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:l("car.color"),name:"color",rules:[{required:!0,message:l("required")}],children:(0,F.jsx)(m.Z,{})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:l("image"),name:"images",children:(0,F.jsx)(_.Z,{type:"deliveryman/settings",imageList:t,setImageList:s,form:a,length:"1",multiple:!0})})}),(0,F.jsx)(c.Z,{span:24,children:(0,F.jsx)(o.Z.Item,{label:l("map"),name:"location",children:(0,F.jsx)(O.Z,{location:n,setLocation:r})})})]})},P=r(81566);function T(){var e,n,r=(0,y.$)().t,q=o.Z.useForm(),O=(0,l.Z)(q,1)[0],z=(0,i.useState)(),T=(0,l.Z)(z,2),A=T[0],U=T[1],V=(0,i.useState)(null),B=(0,l.Z)(V,2),D=B[0],E=B[1],G=(0,i.useState)(!1),J=(0,l.Z)(G,2),W=J[0],$=J[1],H=(0,g.s0)(),K=(0,j.v9)((function(e){return e.user}),j.wU),Q=(0,g.UO)().role,R=(0,j.v9)((function(e){return e.globalSettings}),j.wU).settings,X=(0,i.useState)((0,C.Z)(R)),Y=(0,l.Z)(X,2),ee=Y[0],ne=Y[1];(0,i.useEffect)((function(){return function(){var e=O.getFieldsValue(!0);e.birthday=JSON.stringify(null===e||void 0===e?void 0:e.birthday),te((0,b.nc)({activeMenu:ae,data:(0,s.Z)((0,s.Z)({},ae.data),e)}))}}),[]);var re=(0,g.TH)(),ae=(0,j.v9)((function(e){return e.menu.activeMenu})),te=(0,j.I0)(),se=(0,i.useState)(null!==ae&&void 0!==ae&&null!==(e=ae.data)&&void 0!==e&&e.image?[null===ae||void 0===ae||null===(n=ae.data)||void 0===n?void 0:n.image]:[]),le=(0,l.Z)(se,2),ie=le[0],oe=le[1],ue=(0,i.useState)([]),de=(0,l.Z)(ue,2),ce=de[0],me=de[1];function pe(e){return he.apply(this,arguments)}function he(){return he=(0,t.Z)((0,a.Z)().mark((function e(n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={search:n,status:"approved"},e.abrupt("return",S.Z.search(r).then((function(e){return e.data.map((function(e){return{label:null!==e.translation?e.translation.title:"no name",value:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),he.apply(this,arguments)}return(0,F.jsx)(u.Z,{title:r("add.user"),children:(0,F.jsx)(o.Z,{form:O,layout:"vertical",initialValues:(0,s.Z)((0,s.Z)({gender:"male"},ae.data),function(){var e,n;if(null===(e=ae.data)||void 0===e||!e.birthday)return{};var r=JSON.parse(null===(n=ae.data)||void 0===n?void 0:n.birthday);return{birthday:k()(r)}}()),onFinish:function(e){var n,a;$(!0);var t={firstname:e.firstname,lastname:e.lastname,email:e.user_email,phone:e.phone,birthday:A,gender:e.gender,password_confirmation:e.password_confirmation,password:e.password,images:ie[0]?[null===(n=ie[0])||void 0===n?void 0:n.name]:void 0,shop_id:null!==e&&void 0!==e&&e.shop_id?void 0!==(null===e||void 0===e?void 0:e.shop_id.length)?null===e||void 0===e||null===(a=e.shop_id)||void 0===a?void 0:a.map((function(e){return e.value})):[null===e||void 0===e?void 0:e.shop_id.value]:void 0,role:Q||void 0},l=re.pathname.search("/user/delivery/")?"deliveries/list":"users/admin";console.log(l),w.Z.create(t).then((function(n){var a=n.data;if("deliveryman"===Q){var t={color:e.color,number:e.number,type_of_technique:e.type_of_technique,brand:e.brand,model:e.model,user_id:a.id,images:ie.map((function(e){return e.name})),location:{latitude:ee.lat,longitude:ee.lng}};L.Z.create(t).then((function(){x.Am.success(r("successfully.created")),te((0,b.ph)((0,s.Z)((0,s.Z)({},ae),{},{nextUrl:l}))),H("/".concat(l)),te(re.pathname.search("/user/delivery/")?(0,P.W)():(0,N.uh)({role:Q}))}))}else{var i="users/admin",o=(0,s.Z)((0,s.Z)({},K.params),{},{role:a.role});te((0,b.ph)((0,s.Z)((0,s.Z)({},ae),{},{menu:i}))),H("/".concat(i)),te((0,N.uh)(o))}})).catch((function(e){return E(e.response.data.params)})).finally((function(){return $(!1)}))},children:(0,F.jsxs)(d.Z,{gutter:12,children:[(0,F.jsx)(c.Z,{span:24,children:(0,F.jsx)(o.Z.Item,{rules:[{required:!1,message:r("required")}],label:r("avatar"),children:(0,F.jsx)(_.Z,{type:"users",imageList:ie,setImageList:oe,form:O,multiple:!1})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:r("firstname"),name:"firstname",help:null!==D&&void 0!==D&&D.firstname?D.firstname[0]:null,validateStatus:null!==D&&void 0!==D&&D.firstname?"error":"success",rules:[{required:!0,message:r("required")}],children:(0,F.jsx)(m.Z,{})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:"lastname",name:"lastname",help:null!==D&&void 0!==D&&D.lastname?D.lastname[0]:null,validateStatus:null!==D&&void 0!==D&&D.lastname?"error":"success",rules:[{required:!0,message:r("required")}],children:(0,F.jsx)(m.Z,{})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:r("phone"),name:"phone",help:null!==D&&void 0!==D&&D.phone?D.phone[0]:null,validateStatus:null!==D&&void 0!==D&&D.phone?"error":"success",rules:[{required:!0,message:r("required")}],children:(0,F.jsx)(p.Z,{min:0,className:"w-100"})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:r("birthday"),name:"birthday",rules:[{required:!0,message:r("required")}],children:(0,F.jsx)(h.Z,{onChange:function(e,n){return U(n)},className:"w-100",disabledDate:function(e){return k()().add(-1,"days")<=e}})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:r("gender"),name:"gender",rules:[{required:!0,message:r("required")}],children:(0,F.jsxs)(v.Z,{picker:"dayTime",className:"w-100",children:[(0,F.jsx)(v.Z.Option,{value:"male",children:r("male")}),(0,F.jsx)(v.Z.Option,{value:"female",children:r("female")})]})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:r("email"),name:"user_email",help:null!==D&&void 0!==D&&D.email?D.email[0]:null,validateStatus:null!==D&&void 0!==D&&D.email?"error":"success",rules:[{required:!0,message:r("required")}],children:(0,F.jsx)(m.Z,{type:"email"})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:r("password"),name:"password",help:null!==D&&void 0!==D&&D.password?D.password[0]:null,validateStatus:null!==D&&void 0!==D&&D.password?"error":"success",rules:[{required:!0,message:r("required")}],children:(0,F.jsx)(m.Z.Password,{type:"password",className:"w-100"})})}),"admin"!==Q&&"manager"!==Q&&"moderator"!==Q&&"seller"!==Q&&"user"!==Q&&(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:r("shop"),name:"shop_id",rules:[{required:!0,message:r("required")}],children:(0,F.jsx)(I.h,{mode:"multiple",className:"w-100",placeholder:r("select.shop"),fetchOptions:pe,allowClear:!1})})}),"moderator"===Q&&(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:r("branches"),name:"shop_id",rules:[{required:!0,message:r("required")}],children:(0,F.jsx)(I.h,{fetchOptions:pe,className:"w-100",placeholder:r("select.shop"),allowClear:!1})})}),(0,F.jsx)(c.Z,{span:12,children:(0,F.jsx)(o.Z.Item,{label:r("password.confirmation"),help:null!==D&&void 0!==D&&D.password_confirmation?D.password_confirmation[0]:null,validateStatus:null!==D&&void 0!==D&&D.password_confirmation?"error":"success",name:"password_confirmation",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:r("required")},function(e){var n=e.getFieldValue;return{validator:function(e,a){return a&&n("password")!==a?Promise.reject(r("two.passwords.dont.match")):Promise.resolve()}}}],children:(0,F.jsx)(m.Z.Password,{type:"password"})})}),"deliveryman"===Q&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(f.Z,{className:"pt-3 pb-3",dashed:!0,orientation:"left",plain:!0,children:r("deliveryman.settings")}),(0,F.jsx)(M,{setLocation:ne,location:ee,setImage:me,image:ce,form:O})]}),(0,F.jsx)(c.Z,{span:24,children:(0,F.jsx)(Z.Z,{type:"primary",htmlType:"submit",loading:W,children:r("save")})})]})})})}}}]);