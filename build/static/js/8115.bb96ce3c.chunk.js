"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8115],{89281:function(e,n,t){t.d(n,{h:function(){return h}});var r=t(1413),i=t(29439),s=t(45987),u=t(47313),a=t(12279),l=t.n(a),o=t(74294),c=t(72652),d=t(46417),f=["fetchOptions","debounceTimeout"],h=function(e){var n=e.fetchOptions,t=e.debounceTimeout,a=void 0===t?400:t,h=(0,s.Z)(e,f),m=(0,u.useState)(!1),p=(0,i.Z)(m,2),Z=p[0],v=p[1],x=(0,u.useState)([]),j=(0,i.Z)(x,2),b=j[0],g=j[1],y=(0,u.useMemo)((function(){return l()((function(e){g([]),v(!0),n(e).then((function(e){g(e),v(!1)}))}),a)}),[n,a]);return(0,d.jsx)(o.Z,(0,r.Z)((0,r.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:y,notFoundContent:Z?(0,d.jsx)(c.Z,{size:"small"}):"no results"},h),{},{options:b,onFocus:function(){b.length||y("")}}))}},48115:function(e,n,t){t.r(n);var r=t(4942),i=t(93433),s=t(1413),u=t(29439),a=t(47313),l=t(58467),o=t(34491),c=t(18197),d=t(77181),f=t(68197),h=t(59624),m=t(59491),p=t(2717),Z=t(90954),v=t(18333),x=t(89281),j=t(24511),b=t(4446),g=t(84980),y=t(21249),w=t(46417);n.default=function(){var e,n,t=(0,j.$)().t,S=(0,p.v9)((function(e){return e.menu}),p.wU).activeMenu,F=(0,p.I0)(),_=c.Z.useForm(),O=(0,u.Z)(_,1)[0],k=(0,l.s0)(),N=(0,p.v9)((function(e){return e.myShop}),p.wU).myShop,L=(0,a.useState)(null!==(e=S.data)&&void 0!==e&&e.images?[null===(n=S.data)||void 0===n?void 0:n.images[0]]:[]),T=(0,u.Z)(L,2),q=T[0],C=T[1],I=(0,a.useState)(!1),U=(0,u.Z)(I,2),R=U[0],V=U[1];(0,a.useEffect)((function(){return function(){var e=O.getFieldsValue(!0);F((0,Z.nc)({activeMenu:S,data:e}))}}),[]);return(0,w.jsx)(d.Z,{title:t("add.story"),className:"h-100",children:(0,w.jsxs)(c.Z,{name:"story-add",layout:"vertical",onFinish:function(e){var n=(0,s.Z)((0,s.Z)({},Object.assign.apply(Object,[{}].concat((0,i.Z)(q.map((function(e,n){return(0,r.Z)({},"file_urls[".concat(n,"]"),e.name)})))))),{},{product_id:e.products.value});V(!0);var u="seller/stories";b.Z.create(n).then((function(){var e={shop_id:N.id};o.Am.success(t("successfully.created")),F((0,Z.ph)((0,s.Z)((0,s.Z)({},S),{},{nextUrl:u}))),k("/".concat(u)),F((0,g.U7)(e))})).finally((function(){return V(!1)}))},form:O,initialValues:(0,s.Z)({active:!0},S.data),className:"d-flex flex-column h-100",children:[(0,w.jsxs)(f.Z,{gutter:12,children:[(0,w.jsx)(h.Z,{span:24,children:(0,w.jsx)(c.Z.Item,{label:t("image"),name:"image",rules:[{required:q.length<0,message:t("required")}],children:(0,w.jsx)(y.Z,{form:O,setFileList:C,fileList:q})})}),(0,w.jsx)(h.Z,{span:24,children:(0,w.jsx)(c.Z.Item,{label:t("products"),name:"products",rules:[{required:!0,message:t("required")}],children:(0,w.jsx)(x.h,{fetchOptions:function(e){var n={search:e,shop_id:N.id,status:"published",active:1,rest:1};return v.Z.getAll(n).then((function(e){return e.data.map((function(e){return{label:e.translation.title,value:e.id}}))}))},debounceTimeout:200})})})]}),(0,w.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,w.jsx)("div",{className:"pb-5",children:(0,w.jsx)(m.Z,{type:"primary",htmlType:"submit",loading:R,children:t("submit")})})})]})})}},21249:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(93433),i=t(74165),s=t(15861),u=t(29439),a=t(47313),l=t(72652),o=t(15178),c=t(84695),d=t(82138),f=t(24511),h=t(34344),m={upload:function(e){return h.Z.post("dashboard/seller/stories/upload",e)}},p=t(46417),Z=function(e){return new Promise((function(n,t){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return n(r.result)},r.onerror=function(e){return t(e)}}))},v=function(e){var n=e.fileList,t=e.setFileList,h=e.form,v=(0,f.$)().t,x=(0,a.useState)(!1),j=(0,u.Z)(x,2),b=j[0],g=j[1],y=(0,a.useState)(""),w=(0,u.Z)(y,2),S=w[0],F=w[1],_=(0,a.useState)(""),O=(0,u.Z)(_,2),k=O[0],N=O[1],L=(0,a.useState)(!1),T=(0,u.Z)(L,2),q=T[0],C=T[1],I=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.url||n.preview){e.next=4;break}return e.next=3,Z(n.originFileObj);case 3:n.preview=e.sent;case 4:F(n.url||n.preview),g(!0),N(n.name||n.url.substring(n.url.lastIndexOf("/")+1));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),U=function(e){return{uid:e[0],name:e[0],status:"done",url:e[0],created:!0}},R=q?(0,p.jsx)("div",{children:(0,p.jsx)(l.Z,{})}):(0,p.jsxs)("div",{children:[(0,p.jsx)(d.Z,{className:"upload_plus"}),(0,p.jsx)("div",{style:{marginTop:8},children:(0,p.jsx)("span",{className:"upload_text",children:v("upload")})})]});return(0,p.jsxs)("div",{className:"story_img",children:[(0,p.jsx)(o.Z,{listType:"picture-card",fileList:n,onPreview:I,customRequest:function(e){var i=e.file,s=e.onSuccess;C(!0);var u=new FormData;u.append("files[0]",i),m.upload(u).then((function(e){var i=e.data;t((function(e){return[].concat((0,r.Z)(e),[U(i)])})),h.setFieldsValue({images:[].concat((0,r.Z)(n),[U(i)])}),s("ok")})).finally((function(){C(!1)}))},onRemove:function(e){t((function(n){return n.filter((function(n){return n.uid!==e.uid}))}))},children:n.length>=24?null:R}),(0,p.jsx)(c.Z,{visible:b,title:k,footer:null,onCancel:function(){return g(!1)},children:(0,p.jsx)("img",{alt:"example",style:{width:"100%"},src:S})})]})}}}]);