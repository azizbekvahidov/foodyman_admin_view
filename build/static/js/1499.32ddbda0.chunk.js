"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[1499],{61499:function(t,e,n){n.r(e);var i=n(1413),a=n(93433),u=n(29439),l=n(47313),r=n(58467),c=n(34491),o=n(83999),s=n(18197),d=n(77181),v=n(2717),f=n(90954),p=n(24511),h=n(73431),Z=n(10596),g=n(12545),m=n(97421),k=n(46417),x=o.Z.Step;e.default=function(){var t,e,n,_,S,b,j,y,w,F=(0,p.$)().t,V=(0,v.v9)((function(t){return t.menu}),v.wU).activeMenu,q=(0,v.I0)(),C=s.Z.useForm(),I=(0,u.Z)(C,1)[0],M=(0,r.s0)(),U=function(t){return{name:t,url:m.bV+t}},A=(0,l.useState)(null!==(t=V.data)&&void 0!==t&&null!==(e=t.galleries)&&void 0!==e&&e[0]?[U(null===(n=V.data)||void 0===n||null===(_=n.galleries)||void 0===_?void 0:_[0].path)]:[]),B=(0,u.Z)(A,2),E=B[0],N=B[1],$=(0,l.useState)(null!==(S=V.data)&&void 0!==S&&null!==(b=S.galleries)&&void 0!==b&&b[1]?[U(null===(j=V.data)||void 0===j||null===(y=j.galleries)||void 0===y?void 0:y[1].path)]:[]),z=(0,u.Z)($,2),D=z[0],G=z[1],H=[].concat((0,a.Z)(E),(0,a.Z)(D)),J=(0,l.useState)((null===(w=V.data)||void 0===w?void 0:w.step)||0),K=(0,u.Z)(J,2),L=K[0],O=K[1],P=function(){O(L+1)},Q=function(){O(L-1)},R=(0,l.useState)(!1),T=(0,u.Z)(R,2),W=T[0],X=T[1];(0,l.useEffect)((function(){return function(){var t=I.getFieldsValue(!0);q((0,f.nc)({activeMenu:V,data:t}))}}),[]);return(0,k.jsx)(d.Z,{title:F("add.recepe"),extra:(0,k.jsx)(h.Z,{}),children:(0,k.jsxs)(s.Z,{layout:"vertical",onFinish:function(t){var e;I.validateFields();var n=(0,i.Z)((0,i.Z)({},t),{},{images:H.map((function(t){return t.name})),category_id:t.category_id.value,shop_id:t.shop_id.value,nutrition:t.nutrition.map((function(t){return(0,i.Z)((0,i.Z)({},t),{},{percentage:String(t.percentage),weight:String(t.weight)})})),stocks:null===(e=t.stocks)||void 0===e?void 0:e.map((function(t){return{min_quantity:t.min_quantity,stock_id:t.stock_id.value}}))});X(!0);var a="catalog/recept";g.Z.create(n).then((function(){c.Am.success(F("successfully.created")),M("/".concat(a)),q((0,f.ph)((0,i.Z)((0,i.Z)({},V),{},{nextUrl:a})))})).finally((function(){return X(!1)}))},form:I,initialValues:(0,i.Z)({active:!0},V.data),children:[(0,k.jsx)(o.Z,{current:L,children:Z.S.map((function(t){return(0,k.jsx)(x,{title:F(t.title)},t.title)}))}),Z.S.map((function(t){var e=t.content;return(0,k.jsx)("div",{className:"steps-content ".concat(t.step!==L+1&&"hidden"),children:(0,k.jsx)(e,{next:P,prev:Q,loading:W,image:E,setImage:N,back:D,setBack:G})},t.title)}))]})})}}}]);