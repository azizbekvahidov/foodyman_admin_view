"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[1268],{49655:function(n,e,t){t.d(e,{_:function(){return m}});var i=t(1413),r=t(74165),a=t(93433),l=t(15861),s=t(29439),o=t(45987),u=t(47313),d=t(12279),c=t.n(d),v=t(74294),p=t(72652),f=t(46417),h=["fetchOptions","debounceTimeout","hasMore"],m=function(n){var e=n.fetchOptions,t=n.debounceTimeout,d=void 0===t?400:t,m=n.hasMore,x=(0,o.Z)(n,h),Z=(0,u.useState)(!1),y=(0,s.Z)(Z,2),j=y[0],g=y[1],_=(0,u.useState)([]),b=(0,s.Z)(_,2),N=b[0],k=b[1],w=(0,u.useState)(!1),q=(0,s.Z)(w,2),C=q[0],S=q[1],I=(0,u.useState)(null),D=(0,s.Z)(I,2),M=D[0],H=D[1],z=(0,u.useState)(1),T=(0,s.Z)(z,2),V=T[0],B=T[1],U=(0,u.useMemo)((function(){return c()((function(n){k([]),H(n),g(!0),e({search:n}).then((function(n){k(n),B(2),g(!1)})).finally((function(){return S(!1)}))}),d)}),[e,d,V]),E=function(){var n=(0,l.Z)((0,r.Z)().mark((function n(t){var i;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=t.target,C||i.scrollTop+i.offsetHeight!==i.scrollHeight||m&&(S(!0),i.scrollTo(0,i.scrollHeight),e({search:M,page:V}).then((function(n){B((function(n){return n+1})),k([].concat((0,a.Z)(N),(0,a.Z)(n)))})).finally((function(){return S(!1)})));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,f.jsxs)(v.Z,(0,i.Z)((0,i.Z)({showSearch:!0,allowClear:!0,onPopupScroll:E,labelInValue:!0,filterOption:!1,onSearch:U,notFoundContent:j?(0,f.jsx)(p.Z,{size:"small"}):"no results",onFocus:function(){N.length||U("")}},x),{},{children:[N.map((function(n,e){return(0,f.jsx)(v.Z.Option,{value:n.value,children:n.label},e)})),C&&(0,f.jsx)(v.Z.Option,{children:(0,f.jsx)(p.Z,{size:"small"})})]}))}},63226:function(n,e,t){function i(n){return n.cartItems.filter((function(e){return e.bag_id===n.currentBag}))}function r(n){return n.data.find((function(e){return e.bag_id===n.currentBag}))}t.d(e,{TW:function(){return r},fq:function(){return i}})},21347:function(n,e,t){t.r(e),t.d(e,{default:function(){return Sn}});var i=t(47313),r=t(74165),a=t(15861),l=t(29439),s=t(77181),o=t(68197),u=t(59624),d=(t(89281),t(49067)),c=t(11216),v=t(30763),p=t(80314),f=t(2717),h=t(95882),m=t(41481),x=t(24511),Z=t(59681),y=t(42111),j=t(90954),g=t(63226),_=t(20637),b=t(49655),N=t(46417),k=function(){var n=(0,x.$)().t,e=(0,f.I0)(),t=(0,i.useState)(null),k=(0,l.Z)(t,2),w=k[0],q=k[1],C=(0,i.useState)(null),S=(0,l.Z)(C,2),I=S[0],D=S[1],M=(0,i.useState)(null),H=(0,l.Z)(M,2),z=H[0],T=H[1],V=(0,f.v9)((function(n){return n.menu}),f.wU).activeMenu,B=(0,f.v9)((function(n){return n.allShops}),f.wU).allShops,U=(0,f.v9)((function(n){return n.cart}),f.wU).currentBag,E=function(n){var e;return{label:null===n||void 0===n||null===(e=n.translation)||void 0===e?void 0:e.title,value:null===n||void 0===n?void 0:n.id}}(B[0]),F=(0,f.v9)((function(n){return(0,g.TW)(n.cart)})),A=(0,i.useState)(null),O=(0,l.Z)(A,2),Y=O[0],P=O[1];function W(){return W=(0,a.Z)((0,r.Z)().mark((function n(e){var t,i,a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.search,i=e.page,a={search:t,page:i,status:"approved"},n.abrupt("return",d.Z.search(a).then((function(n){return P(n.links),n.data.map((function(n){return{label:null!==n.translation?n.translation.title:"no name",value:n.id}}))})));case 3:case"end":return n.stop()}}),n)}))),W.apply(this,arguments)}function $(){return $=(0,a.Z)((0,r.Z)().mark((function n(e){var t,i,a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.search,i=e.page,a={search:t,page:void 0===i?1:i},n.abrupt("return",c.Z.search(a).then((function(n){return P(n.links),n.data.map((function(n){return{label:n.title,value:n.id}}))})));case 3:case"end":return n.stop()}}),n)}))),$.apply(this,arguments)}function L(){return L=(0,a.Z)((0,r.Z)().mark((function n(e){var t,i,a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.search,i=e.page,a={search:t,page:i,type:"main"},n.abrupt("return",v.Z.search(a).then((function(n){return P(n.links),n.data.map((function(n){return{label:null!==n.translation?n.translation.title:"no name",value:n.id}}))})));case 3:case"end":return n.stop()}}),n)}))),L.apply(this,arguments)}function R(){return(R=(0,a.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=null===F||void 0===F?void 0:F.shop.value,n.abrupt("return",_.Z.getById(t).then((function(n){e((0,Z.Ng)({bag_id:U,payment_type:n.data.map((function(n){return n.payment}))}))})));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}(0,p.Z)((function(){var n,t={brand_id:null===w||void 0===w?void 0:w.value,category_id:null===I||void 0===I?void 0:I.value,search:z,shop_id:null===F||void 0===F||null===(n=F.shop)||void 0===n?void 0:n.value,status:"published"};e((0,h.q1)(t)),function(){R.apply(this,arguments)}()}),[w,I,z,F.shop]);return(0,i.useEffect)((function(){var n={shop_id:null===E||void 0===E?void 0:E.value};V.refetch&&(e((0,y.dA)(n)),e((0,Z.Ng)({bag_id:U,shop:E})),e((0,j.A_)(V)))}),[V.refetch]),(0,N.jsx)(s.Z,{children:(0,N.jsxs)(o.Z,{gutter:12,children:[(0,N.jsx)(u.Z,{span:6,children:(0,N.jsx)(m.Z,{className:"w-100",placeholder:n("search"),handleChange:T})}),(0,N.jsx)(u.Z,{span:6,children:(0,N.jsx)(b._,{className:"w-100",hasMore:null===Y||void 0===Y?void 0:Y.next,debounceTimeout:500,placeholder:n("select.shop"),fetchOptions:function(n){return W.apply(this,arguments)},allowClear:!1,onChange:function(n){e((0,Z.Ng)({bag_id:U,shop:n})),e((0,Z.LL)())},value:null===F||void 0===F?void 0:F.shop})}),(0,N.jsx)(u.Z,{span:6,children:(0,N.jsx)(b._,{className:"w-100",hasMore:null===Y||void 0===Y?void 0:Y.next,placeholder:n("select.category"),fetchOptions:function(n){return L.apply(this,arguments)},onChange:function(n){return D(n)},value:I})}),(0,N.jsx)(u.Z,{span:6,children:(0,N.jsx)(b._,{hasMore:null===Y||void 0===Y?void 0:Y.next,className:"w-100",placeholder:n("select.brand"),fetchOptions:function(n){return $.apply(this,arguments)},onChange:function(n){return q(n)},value:w})})]})})},w=t(15508),q=t(1413),C=t(72652),S=t(18074),I=t(66909),D=t(82138),M=t(45464),H=t(34491),z=t(93433),T=t(84695),V=t(59491),B=t(78891),U=t(83371),E=t(45705),F=t(55768),A=t(8846),O=t(84017),Y=t(91220),P=t(28939),W=t(77370),$=t(32697),L=function(n){var e,t,i=n.showExtras,r=n.addonCalculate,a=n.selectedValues,l=n.handleChange;return(0,N.jsx)(E.Z,{direction:"vertical",size:"middle",children:null===(e=i.stock)||void 0===e||null===(t=e.addons)||void 0===t?void 0:t.filter((function(n){return!!n.product})).map((function(n){var e=a.includes(String(n.addon_id));return(0,N.jsxs)("div",{children:[(0,N.jsx)($.Z,{id:String(n.id),name:String(n.id),checked:e,onChange:function(){return l(n)}}),(0,N.jsxs)("label",{htmlFor:String(n.id),children:[e&&(0,N.jsxs)(E.Z,{size:0,children:[(0,N.jsx)(V.Z,{type:"text",className:"minus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,N.jsx)(A.Z,{}),disabled:1===n.product.quantity,onClick:function(e){e.stopPropagation(),r(n.addon_id,n.product.quantity-1)}}),(0,N.jsx)("span",{className:"ml-2",children:n.product.quantity||n.product.min_qty}),(0,N.jsx)(V.Z,{type:"text",className:"plus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,N.jsx)(D.Z,{}),onClick:function(e){e.stopPropagation(),r(n.addon_id,n.product.quantity?n.product.quantity+1:n.product.min_qty+1)}})]}),(0,N.jsx)("span",{className:"ml-2",children:n.product.translation.title})]})]},n.id)}))})},R=t(17101);function K(n){var e,t,r=n.extrasModal,a=n.setExtrasModal,s=(0,i.useState)(!1),d=(0,l.Z)(s,2),c=d[0],v=d[1],h=(0,i.useState)({}),m=(0,l.Z)(h,2),y=m[0],j=m[1],g=(0,x.$)().t,_=(0,i.useState)({}),b=(0,l.Z)(_,2),k=b[0],w=b[1],S=(0,f.I0)(),I=(0,i.useState)([]),$=(0,l.Z)(I,2),K=$[0],X=$[1],J=(0,i.useState)([]),Q=(0,l.Z)(J,2),G=Q[0],nn=Q[1],en=(0,i.useState)([]),tn=(0,l.Z)(en,2),rn=tn[0],an=tn[1],ln=(0,i.useState)([]),sn=(0,l.Z)(ln,2),on=sn[0],un=sn[1],dn=(0,i.useState)([]),cn=(0,l.Z)(dn,2),vn=cn[0],pn=cn[1],fn=(0,i.useState)({extras:[],stock:{id:0,quantity:1,price:0}}),hn=(0,l.Z)(fn,2),mn=hn[0],xn=hn[1],Zn=(0,i.useState)(r.quantity||y.quantity||y.min_qty),yn=(0,l.Z)(Zn,2),jn=yn[0],gn=yn[1],_n=(0,f.v9)((function(n){return n.cart}),f.wU),bn=_n.currentBag,Nn=_n.currency;var kn=function(){return a(!1)};function wn(n){return(null===on||void 0===on?void 0:on.reduce((function(n,e){return n+e.product.stock.price*(e.product.quantity||e.product.min_qty)}),0))+(null===mn||void 0===mn?void 0:mn.stock[n||"price"])*jn}return(0,p.Z)((function(){var n=mn.stock.addons.filter((function(n){return vn.includes(String(n.addon_id))}));un(n)}),[vn]),(0,i.useEffect)((function(){null!==mn&&void 0!==mn&&mn.stock&&w((0,q.Z)((0,q.Z)({},mn.stock),{},{extras:rn}))}),[mn]),(0,i.useEffect)((function(){v(!0),R.Z.getById(r.uuid).then((function(n){var e,t=n.data;j(t);var i,a=(0,W.o)(t,null===r||void 0===r?void 0:r.addons);(X(a.extras),gn(r.quantity||t.quantity||t.min_qty),nn(a.stock),xn((0,W.y)(rn,a.extras,a.stock)),null===(e=(0,W.y)("",a.extras,a.stock).extras)||void 0===e||e.forEach((function(n){an((function(e){return[].concat((0,z.Z)(e),[n[0]])}))})),null!==r&&void 0!==r&&r.addons)&&pn((null===r||void 0===r||null===(i=r.addons)||void 0===i?void 0:i.map((function(n){var e;return String((null===n||void 0===n||null===(e=n.countable)||void 0===e?void 0:e.id)||n.countable_id)})))||[])})).finally((function(){return v(!1)}))}),[r.uuid]),(0,N.jsx)(T.Z,{visible:!!y,title:y.name,onCancel:kn,footer:[(0,N.jsx)(V.Z,{icon:(0,N.jsx)(F.Z,{}),type:"primary",onClick:function(){var n=on.map((function(n){return(0,q.Z)((0,q.Z)({},n),{},{stockID:n.product.stock.id,quantity:n.product.quantity||n.product.min_qty})})),e=(0,q.Z)((0,q.Z)({},y),{},{stock:k,quantity:jn,id:k.id,img:(0,P.Z)(k)||y.img,bag_id:bn,stockID:k,addons:n});e.quantity>k.quantity?H.Am.warning("".concat(g("you.cannot.order.more.than")," ").concat(k.quantity)):(S((0,Z.Xq)(e)),a(null))},children:g("add")},"add-product"),(0,N.jsx)(V.Z,{type:"default",onClick:kn,children:g("cancel")},"cancel-product")],children:(0,N.jsxs)(C.Z,{spinning:c,children:[(0,N.jsxs)(o.Z,{gutter:24,children:[(0,N.jsx)(u.Z,{span:8,children:(0,N.jsx)(B.Z,{src:(0,M.Z)((0,P.Z)(k)||y.img),alt:y.name,height:200,style:{objectFit:"contain"}})}),(0,N.jsx)(u.Z,{span:16,children:(0,N.jsxs)(U.Z,{title:null===(e=y.translation)||void 0===e?void 0:e.title,children:[(0,N.jsxs)(U.Z.Item,{label:g("price"),span:3,children:[(0,N.jsx)("div",{className:null!==k&&void 0!==k&&k.discount?"strike":"",children:(0,O.Z)(wn(),null===Nn||void 0===Nn?void 0:Nn.symbol)}),null!==k&&void 0!==k&&k.discount?(0,N.jsx)("div",{className:"ml-2 font-weight-bold",children:(0,O.Z)(wn("total_price"),null===Nn||void 0===Nn?void 0:Nn.symbol)}):""]}),(0,N.jsx)(U.Z.Item,{label:g("in.stock"),span:3,children:(0,Y.Z)(null===k||void 0===k?void 0:k.quantity,y.unit)}),(0,N.jsx)(U.Z.Item,{label:g("tax"),span:3,children:(0,O.Z)(null===k||void 0===k?void 0:k.tax,null===Nn||void 0===Nn?void 0:Nn.symbol)})]})})]}),null===mn||void 0===mn||null===(t=mn.extras)||void 0===t?void 0:t.map((function(n,e){return(0,N.jsx)("div",{className:"extra-group",children:(0,N.jsx)(E.Z,{className:"extras-select",children:n.map((function(n){return(0,N.jsx)("span",{className:"extras-text rounded ".concat(rn.find((function(e){return e.id===n.id}))?"selected":""),onClick:function(){return function(n){var e,t=rn.findIndex((function(e){return e.extra_group_id===n.extra_group_id})),i=rn;t>-1&&(i=i.slice(0,t)),i.push(n);var r=i.map((function(n){return n.id})).join(","),a=(0,W.y)(r,K,G);xn(a),null===(e=a.extras)||void 0===e||e.forEach((function(e){var t=rn.findIndex((function(t){return e[0].extra_group_id!=n.extra_group_id?t.extra_group_id===e[0].extra_group_id:t.extra_group_id===n.extra_group_id}));if(e[0].level>=n.level){var r=e[0].extra_group_id!=n.extra_group_id?e[0]:n;-1==t?i.push(r):i[t]=r}})),an(i)}(n)},children:n.value})}))},"extra-group"+e)})})),(0,N.jsx)(L,{showExtras:mn,selectedValues:vn,handleChange:function(n){var e=String(n.addon_id);vn.includes(e)?pn((function(n){return n.filter((function(n){return n!==e}))})):pn((function(n){return[].concat((0,z.Z)(n),[e])}))},addonCalculate:function(n,e){xn((function(t){return(0,q.Z)((0,q.Z)({},t),{},{stock:(0,q.Z)((0,q.Z)({},t.stock),{},{addons:t.stock.addons.map((function(t){return t.addon_id===n?(0,q.Z)((0,q.Z)({},t),{},{product:(0,q.Z)((0,q.Z)({},t.product),{},{quantity:e})}):t}))})})})),un((function(t){return t.map((function(t){return t.addon_id===n?(0,q.Z)((0,q.Z)({},t),{},{product:(0,q.Z)((0,q.Z)({},t.product),{},{quantity:e})}):t}))}))}}),(0,N.jsx)(o.Z,{gutter:12,className:"mt-3",children:(0,N.jsx)(u.Z,{span:24,children:(0,N.jsxs)(E.Z,{children:[(0,N.jsx)(V.Z,{type:"primary",icon:(0,N.jsx)(A.Z,{}),onClick:function(){1!==jn&&(jn<=y.min_qty||gn((function(n){return n-1})))}}),jn,(0,N.jsx)(V.Z,{type:"primary",icon:(0,N.jsx)(D.Z,{}),onClick:function(){jn!==(null===y||void 0===y?void 0:y.quantity)&&jn!==y.max_qty&&gn((function(n){return n+1}))}})]})})})]})})}var X=t(58821),J=t(51988);function Q(){var n={lg:8,xl:6,xxl:6},e=(0,x.$)().t,t=(0,i.useState)(null),r=(0,l.Z)(t,2),a=r[0],d=r[1],c=(0,f.I0)(),v=(0,f.v9)((function(n){return n.product}),f.wU),p=v.products,m=v.loading,Z=v.meta,y=v.params,j=(0,f.v9)((function(n){return n.cart}),f.wU).data,_=(0,f.v9)((function(n){return(0,g.TW)(n.cart)})),b=(0,f.v9)((function(n){return n.cart}),f.wU).currency;return(0,N.jsxs)("div",{className:"px-2",children:[m?(0,N.jsx)(C.Z,{className:"d-flex justify-content-center my-5"}):(0,N.jsx)(o.Z,{gutter:12,className:"mt-4 product-card",children:0===p.length?(0,N.jsx)(u.Z,{span:24,children:(0,N.jsx)(J.Z,{id:"nosell"})}):p.map((function(t,r){return(0,i.createElement)(u.Z,(0,q.Z)((0,q.Z)({},n),{},{key:r}),(0,N.jsxs)(s.Z,{className:"products-col",cover:(0,N.jsx)("img",{alt:t.name,src:(0,M.Z)(t.img)}),onClick:function(){return function(n){b?_.address?_.deliveries?d(n):H.Am.warning(e("please.select.delivery")):H.Am.warning(e("please.select.address")):H.Am.warning(e("please.select.currency"))}(t)},children:[(0,N.jsx)(I.Z,{title:t.translation.title}),(0,N.jsx)("div",{className:"preview",children:(0,N.jsx)(D.Z,{})}),t.stocks.map((function(n){var e,t;return(0,N.jsxs)("span",{className:n.bonus?"show-bonus":"d-none",children:[(0,N.jsx)(X.ojn,{})," ",null===(e=n.bonus)||void 0===e?void 0:e.value,"+",null===(t=n.bonus)||void 0===t?void 0:t.bonus_quantity]})}))]},t.id))}))}),a&&(0,N.jsx)(K,{extrasModal:a,setExtrasModal:d}),(0,N.jsx)("div",{className:"d-flex justify-content-end my-5",children:(0,N.jsx)(S.Z,{total:Z.total,current:y.page,pageSize:12,showSizeChanger:!1,onChange:function(n){c((0,h.q1)({perPage:12,page:n,shop_id:j[0].shop.value,status:"published"}))}})})]})}var G=t(18197),nn=t(66672),en=t(74294),tn=t(66461),rn=t(11829),an=t(40200),ln=t(49986),sn=t(16031),on=t(6289);function un(n){var e=n.visible,t=n.handleCancel,r=(0,x.$)().t,a=G.Z.useForm(),s=(0,l.Z)(a,1)[0],d=(0,i.useState)(!1),c=(0,l.Z)(d,2),v=c[0],p=c[1],f=(0,i.useState)(null),h=(0,l.Z)(f,2),m=h[0],Z=h[1];return(0,N.jsx)(T.Z,{title:r("add.client"),visible:e,onCancel:t,footer:[(0,N.jsx)(V.Z,{type:"primary",onClick:function(){return s.submit()},loading:v,children:r("save")},"ok-button"),(0,N.jsx)(V.Z,{onClick:t,children:r("cancel")},"cancel-button")],children:(0,N.jsx)(G.Z,{layout:"vertical",name:"user-add-form",form:s,onFinish:function(n){var e=(0,q.Z)((0,q.Z)({},n),{},{role:"user"});p(!0),ln.Z.create(e).then((function(){H.Am.success(r("successfully.added")),t()})).catch((function(n){return Z(n.response.data.params)})).finally((function(){return p(!1)}))},children:(0,N.jsxs)(o.Z,{gutter:12,children:[(0,N.jsx)(u.Z,{span:12,children:(0,N.jsx)(G.Z.Item,{label:r("firstname"),name:"firstname",help:null!==m&&void 0!==m&&m.firstname?m.firstname[0]:null,validateStatus:null!==m&&void 0!==m&&m.firstname?"error":"success",rules:[{required:!0,message:r("required")}],children:(0,N.jsx)(nn.Z,{})})}),(0,N.jsx)(u.Z,{span:12,children:(0,N.jsx)(G.Z.Item,{label:r("lastname"),name:"lastname",help:null!==m&&void 0!==m&&m.lastname?m.lastname[0]:null,validateStatus:null!==m&&void 0!==m&&m.lastname?"error":"success",rules:[{required:!0,message:r("required")}],children:(0,N.jsx)(nn.Z,{})})}),(0,N.jsx)(u.Z,{span:12,children:(0,N.jsx)(G.Z.Item,{label:r("phone"),name:"phone",help:null!==m&&void 0!==m&&m.phone?m.phone[0]:null,validateStatus:null!==m&&void 0!==m&&m.phone?"error":"success",rules:[{required:!0,message:r("required")}],children:(0,N.jsx)(on.Z,{min:0,className:"w-100"})})}),(0,N.jsx)(u.Z,{span:12,children:(0,N.jsx)(G.Z.Item,{label:r("email"),name:"email",help:null!==m&&void 0!==m&&m.email?m.email[0]:null,validateStatus:null!==m&&void 0!==m&&m.email?"error":"success",rules:[{required:!0,message:r("required")}],children:(0,N.jsx)(nn.Z,{type:"email"})})})]})})})}var dn=t(97388),cn=t(17649);function vn(n){var e=n.uuid,t=n.handleCancel,r=(0,x.$)().t,a=G.Z.useForm(),s=(0,l.Z)(a,1)[0],o=(0,f.I0)(),u=(0,f.v9)((function(n){return(0,g.TW)(n.cart)})),d=(0,f.v9)((function(n){return n.cart}),f.wU).currentBag,c=(0,f.v9)((function(n){return n.globalSettings}),f.wU).settings,v=(0,i.useState)(u.address?{lat:u.address.lat,lng:u.address.lng}:(0,cn.Z)(c)),p=(0,l.Z)(v,2),h=p[0],m=p[1];return(0,i.useEffect)((function(){s.setFieldsValue({address:u.address.address||null})}),[d]),(0,N.jsx)(T.Z,{visible:!!e,title:r("create.address"),onCancel:t,footer:[(0,N.jsx)(V.Z,{type:"primary",onClick:function(){return s.submit()},children:r("save")},"saveBtn"),(0,N.jsx)(V.Z,{type:"default",onClick:t,children:r("cancel")},"cancelBtn")],children:(0,N.jsxs)(G.Z,{layout:"vertical",name:"user-address",form:s,onFinish:function(n){var e=(0,q.Z)((0,q.Z)({},n),{},{active:1,lat:h.lat,lng:h.lng});o((0,Z.Ng)({address:e,bag_id:d})),t()},children:[(0,N.jsx)(G.Z.Item,{name:"address",label:r("address"),rules:[{required:!0,message:r("required")}],children:(0,N.jsx)(nn.Z,{})}),(0,N.jsx)(G.Z.Item,{label:r("map"),children:(0,N.jsx)(dn.Z,{location:h,setLocation:m,setAddress:function(n){return s.setFieldsValue({address:n})}})})]})})}var pn=t(99096),fn=t(70816),hn=t.n(fn),mn=t(53149),xn=[{title:"sunday"},{title:"monday"},{title:"tuesday"},{title:"wednesday"},{title:"thursday"},{title:"friday"},{title:"saturday"}],Zn=function(){var n,e,t,r,a,l,d=(0,x.$)().t,c=(0,f.I0)(),v=(0,f.v9)((function(n){return(0,g.TW)(n.cart)})),p=(0,f.v9)((function(n){return n.menu}),f.wU).activeMenu,h=(0,f.v9)((function(n){return n.cart}),f.wU).currentBag,m=(0,f.v9)((function(n){return(0,g.TW)(n.cart)})),y=new Date(v.delivery_date),_=null===(n=p.data)||void 0===n||null===(e=n.CurrentShop)||void 0===e||null===(t=e.shop_working_days)||void 0===t?void 0:t.filter((function(n){return!0!==n.disabled})).find((function(n){var e;return(null===n||void 0===n?void 0:n.day)===(null===(e=xn[y.getDay()])||void 0===e?void 0:e.title)})),b=null===(r=p.data)||void 0===r||null===(a=r.CurrentShop)||void 0===a||null===(l=a.shop_closed_date)||void 0===l?void 0:l.map((function(n){return n.day}));var k=function(n,e){for(var t=[],i=n;i<e;i++)t.push(i);return t};return(0,i.useEffect)((function(){var n,e,t;null!==m&&void 0!==m&&null!==(n=m.shop)&&void 0!==n&&n.value&&(t=null===m||void 0===m||null===(e=m.shop)||void 0===e?void 0:e.value,mn.Z.getById(t).then((function(n){var e=n.data;c((0,Z.Ng)({currency_shop:e,bag_id:h})),c((0,j.nc)({activeMenu:p,data:(0,q.Z)((0,q.Z)({},p.data),{},{CurrentShop:n.data})}))})))}),[null===m||void 0===m?void 0:m.shop]),(0,N.jsx)(s.Z,{title:d("shipping.info"),className:"p-0",children:(0,N.jsxs)(o.Z,{gutter:12,children:[(0,N.jsx)(u.Z,{span:24,children:(0,N.jsx)(G.Z.Item,{name:"delivery",label:d("delivery"),rules:[{required:!0,message:d("required")}],children:(0,N.jsx)(en.Z,{options:[{label:"delivery",value:1,key:1},{label:"pickup",value:0,key:2}],labelInValue:!0,onSelect:function(n){return c((0,Z.Ng)({delivery_fee:n.value,bag_id:h}))},onChange:function(n){return c((0,Z.Ng)({deliveries:n,bag_id:h}))}})})}),(0,N.jsx)(u.Z,{span:24,children:(0,N.jsxs)(o.Z,{gutter:12,children:[(0,N.jsx)(u.Z,{span:12,children:(0,N.jsx)(G.Z.Item,{name:"delivery_date",label:d("delivery.date"),rules:[{required:!0,message:d("required")}],children:(0,N.jsx)(pn.Z,{placeholder:d("delivery.date"),className:"w-100",format:"YYYY-MM-DD",disabledDate:function(n){var e=null===b||void 0===b?void 0:b.find((function(e){return e===hn()(n).format("YYYY-MM-DD")})),t=hn()().add(-1,"days")>=n;return e||t},onChange:function(n){var e=hn()(n).format("YYYY-MM-DD");c((0,Z.Ng)({delivery_date:e,bag_id:h}))}})})}),(0,N.jsx)(u.Z,{span:12,children:(0,N.jsx)(G.Z.Item,{label:"".concat(d("delivery.time")," (").concat(d("up.to"),")"),name:"delivery_time",rules:[{required:!1,message:d("required")}],children:(0,N.jsx)(pn.Z,{disabled:!v.delivery_date,picker:"time",placeholder:d("start.time"),className:"w-100",format:"HH:mm:ss",showNow:!1,disabledTime:function(){return{disabledHours:function(){return function(n,e){for(var t=parseInt(n),i=parseInt(e),r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],a=t;a<=i;a++)delete r[a];return r}(hn()(new Date).format("DD")===hn()(v.delivery_date).format("DD")?(null===_||void 0===_?void 0:_.from.substring(0,2))>=hn()(new Date).format("HH")?null===_||void 0===_?void 0:_.from.substring(0,2):hn()(new Date).format("HH"):null===_||void 0===_?void 0:_.from.substring(0,2),null===_||void 0===_?void 0:_.to.substring(0,2))},disabledMinutes:function(){return k(0,60)},disabledSeconds:function(){return k(0,60)}}},onChange:function(n){var e=hn()(n).format("HH:mm:ss");c((0,Z.Ng)({delivery_time:e,bag_id:h}))}})})})]})})]})})};function yn(){var n,e,t=(0,x.$)().t,d=G.Z.useForm(),c=(0,l.Z)(d,1)[0],v=(0,f.I0)(),p=(0,f.v9)((function(n){return n.currency}),f.wU),h=p.currencies,m=p.loading,y=(0,f.v9)((function(n){return n.cart}),f.wU),j=y.currentBag,_=y.bags,k=y.currency,w=(0,f.v9)((function(n){return(0,g.TW)(n.cart)})),q=(0,f.v9)((function(n){return n.payment}),f.wU).payments,S=(0,i.useState)([]),I=(0,l.Z)(S,2),M=I[0],z=I[1],T=(0,i.useState)(null),B=(0,l.Z)(T,2),U=B[0],F=B[1],A=(0,i.useState)(null),O=(0,l.Z)(A,2),Y=O[0],P=O[1],W=(0,i.useState)(null),$=(0,l.Z)(W,2),L=$[0],R=$[1],K=(0,f.v9)((function(n){return(0,g.TW)(n.cart)})),X=(0,f.v9)((function(n){return n.globalSettings.settings}),f.wU).payment_type;function J(){return J=(0,a.Z)((0,r.Z)().mark((function n(e){var t,i,a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.search,i=e.page,a={search:t,perPage:10,page:i},n.abrupt("return",ln.Z.search(a).then((function(n){return R(n.links),z(n.data),Q(n.data)})));case 3:case"end":return n.stop()}}),n)}))),J.apply(this,arguments)}function Q(n){if(n)return(0,sn.isArray)(n)?n.map((function(n){return{label:"".concat(n.firstname," ").concat(n.lastname?n.lastname:""),value:n.id}})):{label:"".concat(n.firstname," ").concat(n.lastname),value:n.id}}return(0,i.useEffect)((function(){if(k){var n={label:"".concat(null===k||void 0===k?void 0:k.title," (").concat(null===k||void 0===k?void 0:k.symbol,")"),value:null===k||void 0===k?void 0:k.id};v((0,Z.Ng)({formCurrency:n,bag_id:j})),c.setFieldsValue({currency:n})}else{var e=h.find((function(n){return n.default})),t={label:"".concat(null===e||void 0===e?void 0:e.title," (").concat(null===e||void 0===e?void 0:e.symbol,")"),value:null===e||void 0===e?void 0:e.id};v((0,Z.Ng)({currentCurrency:e,bag_id:j})),v((0,Z.NW)(e)),c.setFieldsValue({currency:t})}}),[]),(0,i.useEffect)((function(){c.setFieldsValue({user:w.user||null,payment_type:w.paymentType||null,address:w.address.address||null,delivery:w.deliveries||null})}),[j,w]),(0,N.jsxs)("div",{className:"order-tabs",children:[(0,N.jsxs)("div",{className:"tabs-container",children:[(0,N.jsx)("div",{className:"tabs",children:_.map((function(n){return(0,N.jsx)("div",{className:n===j?"tab active":"tab",onClick:function(){return v((0,Z.$s)(n))},children:(0,N.jsxs)(E.Z,{children:[(0,N.jsx)(tn.Z,{}),(0,N.jsxs)("span",{children:[t("bag")," - ",n]}),n&&n===j?(0,N.jsx)(rn.Z,{onClick:function(e){return function(n,e){n.preventDefault(),n.stopPropagation(),v((0,Z.KI)(e))}(e,n)},className:"close-button",size:12}):""]})},"tab"+n)}))}),(0,N.jsx)(V.Z,{size:"small",type:"primary",shape:"circle",icon:(0,N.jsx)(D.Z,{}),className:"tab-add-button",onClick:function(){return v((0,Z.Cs)({shop:K.shop}))}})]}),(0,N.jsxs)(G.Z,{layout:"vertical",name:"pos-form",form:c,initialValues:{user:w.user||null,currency:k||void 0,payment_type:w.paymentType||null,deliveries:w.deliveries,delivery:{label:"pickup",value:"0"}},children:[(0,N.jsxs)(s.Z,{className:j?"":"tab-card",children:[m&&(0,N.jsx)("div",{className:"loader",children:(0,N.jsx)(C.Z,{})}),(0,N.jsxs)(o.Z,{gutter:6,style:{marginBottom:15},children:[(0,N.jsx)(u.Z,{span:9,children:(0,N.jsx)(G.Z.Item,{name:"user",rules:[{required:!0,message:""}],className:"w-100",children:(0,N.jsx)(b._,{hasMore:null===L||void 0===L?void 0:L.next,placeholder:t("select.client"),fetchOptions:function(n){return J.apply(this,arguments)},onSelect:function(n){var e=M.find((function(e){return e.id===n.value}));v((0,Z.Ng)({user:n,userUuid:e.uuid,bag_id:j,userOBJ:e})),c.setFieldsValue({address:null})}})})}),(0,N.jsx)(u.Z,{children:(0,N.jsx)(G.Z.Item,{children:(0,N.jsx)(V.Z,{icon:(0,N.jsx)(an.Z,{}),onClick:function(){return P(!0)}})})}),(0,N.jsx)(u.Z,{span:12,children:(0,N.jsx)(G.Z.Item,{name:"address",rules:[{required:!0,message:""}],onClick:function(){w.userUuid?F(w.userUuid):H.Am.warning(t("please.select.client"))},children:(0,N.jsx)(nn.Z,{autoComplete:"off",placeholder:t("address")})})}),(0,N.jsx)(u.Z,{span:12,children:(0,N.jsx)(G.Z.Item,{name:"currency",rules:[{required:!0,message:"missing_currency"}],children:(0,N.jsx)(en.Z,{placeholder:t("select.currency"),onSelect:function(n){var e=h.find((function(e){return e.id===n.value}));v((0,Z.NW)(e))},labelInValue:!0,disabled:!0,onChange:function(n){var e=n;v((0,Z.Ng)({currency:e,bag_id:j}))},children:h.map((function(n,e){return(0,N.jsx)(en.Z.Option,{value:null===n||void 0===n?void 0:n.id,children:"".concat(null===n||void 0===n?void 0:n.title," (").concat(null===n||void 0===n?void 0:n.symbol,")")},e)}))})})}),(0,N.jsx)(u.Z,{span:12,children:(0,N.jsx)(G.Z.Item,{name:"payment_type",rules:[{required:!0,message:t("missing.payment.type")}],children:(0,N.jsx)(en.Z,{placeholder:t("select.payment.type"),labelInValue:!0,onSelect:function(n){return v((0,Z.Ng)({paymentType:n,bag_id:j}))},children:null===(n="admin"===X?q:null===K||void 0===K?void 0:K.payment_type)||void 0===n||null===(e=n.filter((function(n){return"cash"===n.tag||"wallet"===n.tag})))||void 0===e?void 0:e.map((function(n,e){return(0,N.jsx)(en.Z.Option,{value:n.id,children:null===n||void 0===n?void 0:n.tag},e)}))})})})]})]}),(0,N.jsx)(Zn,{})]}),U&&(0,N.jsx)(vn,{uuid:U,handleCancel:function(){return F(null)}}),Y&&(0,N.jsx)(un,{visible:Y,handleCancel:function(){return P(!1)}})]})}var jn=t(47515),gn=t(43681),_n=t(7370),bn=t(21448),Nn=t(44653);var kn=t(1003),wn=t(74776),qn=t.n(wn);function Cn(){var n=(0,x.$)().t,e=G.Z.useForm(),t=(0,l.Z)(e,1)[0],r=(0,f.I0)(),a=(0,f.v9)((function(n){return n.cart}),f.wU),c=a.cartItems,v=a.cartShops,m=a.currentBag,y=a.total,j=a.coupons,_=a.currency,b=(0,f.v9)((function(n){return(0,g.fq)(n.cart)})),k=(0,f.v9)((function(n){return(0,g.TW)(n.cart)})),w=(0,i.useState)([]),S=(0,l.Z)(w,2),I=S[0],T=S[1],U=(0,i.useState)(!1),F=(0,l.Z)(U,2),Y=F[0],P=F[1],W=(0,i.useState)(null),$=(0,l.Z)(W,2),L=$[0],R=$[1],K=(0,i.useState)(null),X=(0,l.Z)(K,2),J=X[0],Q=X[1],en=function(n,e){var t=(0,i.useState)(n),r=(0,l.Z)(t,2),a=r[0],s=r[1];return(0,i.useEffect)((function(){var t=setTimeout((function(){s(n)}),e);return function(){clearTimeout(t)}}),[n,e]),a}(c,300),tn=(0,f.v9)((function(n){return(0,g.TW)(n.cart)})),rn=function(n){var e;n.quantity!==(null===n||void 0===n||null===(e=n.stockID)||void 0===e?void 0:e.quantity)&&n.quantity!==n.max_qty&&r((0,Z.Xq)((0,q.Z)((0,q.Z)({},n),{},{quantity:1})))},an=function(n){1!==n.quantity&&(n.quantity<=n.min_qty||r((0,Z.aN)((0,q.Z)((0,q.Z)({},n),{},{quantity:1}))))};function ln(){var n=function(n){var e,t,i,r,a,l,s=n.map((function(n){var e,t;return{quantity:n.quantity,stock_id:n.stockID?null===(e=n.stockID)||void 0===e?void 0:e.id:null===(t=n.stock)||void 0===t?void 0:t.id}})),o=n.flatMap((function(n){return n.addons.map((function(e){var t,i;return{quantity:e.quantity,stock_id:e.stockID,parent_id:n.stockID?null===(t=n.stockID)||void 0===t?void 0:t.id:null===(i=n.stock)||void 0===i?void 0:i.id}}))})),u={products:s.concat(o),currency_id:null===_||void 0===_?void 0:_.id,coupon:null===k||void 0===k||null===(e=k.coupon)||void 0===e?void 0:e.name,shop_id:null===k||void 0===k||null===(t=k.shop)||void 0===t?void 0:t.value,type:null===k||void 0===k||null===(i=k.deliveries)||void 0===i||null===(r=i.label)||void 0===r?void 0:r.toLowerCase(),address:{latitude:null===k||void 0===k||null===(a=k.address)||void 0===a?void 0:a.lat,longitude:null===k||void 0===k||null===(l=k.address)||void 0===l?void 0:l.lng}};return qn().stringify(u,{addQueryPrefix:!0})}(b);P(!0),_n.Z.calculate(n).then((function(n){var e,t=n.data.data,i=t.stocks.map((function(n){return(0,q.Z)((0,q.Z)((0,q.Z)((0,q.Z)({},b.find((function(e){return e.id===n.id}))),n),n.stock.countable),{},{stock:n.stock.stock_extras,stocks:n.stock.stock_extras,stockID:n.stock})})),a=[(0,q.Z)((0,q.Z)({},I),{},{products:i})];r((0,Z.kT)(a));var l={product_total:null===(e=t.stocks)||void 0===e?void 0:e.reduce((function(n,e){return n+(e.total_price||e.price)}),0),product_tax:t.total_tax,shop_tax:t.total_shop_tax,order_total:t.total_price,delivery_fee:t.delivery_fee};r((0,Z.YP)(l))})).finally((function(){return P(!1)}))}(0,i.useEffect)((function(){var n;null!==k&&void 0!==k&&null!==(n=k.shop)&&void 0!==n&&n.value&&function(){var n;d.Z.getById(null===k||void 0===k||null===(n=k.shop)||void 0===n?void 0:n.value).then((function(n){return T(n.data)}))}()}),[]),(0,p.Z)((function(){var n;r((0,h.q1)({perPage:12,currency_id:null===_||void 0===_?void 0:_.id,shop_id:null===k||void 0===k||null===(n=k.shop)||void 0===n?void 0:n.value})),b.length&&ln()}),[_]),(0,p.Z)((function(){b.length?ln():r((0,Z.ql)())}),[en,m,null===k||void 0===k?void 0:k.address,_]);function sn(n,e){kn.Z.create(n,e).then((function(n){return function(n){R(n)}(n.data.id)})).finally((function(){return P(!1)}))}return(0,N.jsxs)(s.Z,{children:[Y&&(0,N.jsx)("div",{className:"loader",children:(0,N.jsx)(C.Z,{})}),(0,N.jsxs)("div",{className:"card-save",children:[null===v||void 0===v?void 0:v.map((function(e,t){var i,a,l,s,d,c;return(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:"all-price",children:[(0,N.jsxs)("span",{className:"title",children:[null===e||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title," ",n("shop")]}),(0,N.jsxs)("span",{className:"counter",children:[null===e||void 0===e||null===(a=e.products)||void 0===a?void 0:a.length," ",(null===e||void 0===e||null===(l=e.products)||void 0===l?void 0:l.length)>1?n("products"):n("product")]})]}),null===e||void 0===e||null===(s=e.products)||void 0===s?void 0:s.map((function(e,t){var i,a,l,s,d,c;return!0!==(null===e||void 0===e?void 0:e.bonus)?(0,N.jsx)("div",{className:"custom-cart-container",children:(0,N.jsxs)(o.Z,{className:"product-row",children:[(0,N.jsx)(B.Z,{width:70,height:"auto",src:(0,M.Z)(null===e||void 0===e?void 0:e.img),preview:!0,placeholder:!0,className:"rounded"}),(0,N.jsx)(u.Z,{span:18,className:"product-col",children:(0,N.jsxs)("div",{children:[(0,N.jsx)("span",{className:"product-name",children:null===e||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title}),(0,N.jsx)("br",{}),(0,N.jsx)(E.Z,{wrap:!0,className:"mt-2",children:null===e||void 0===e||null===(a=e.stock)||void 0===a?void 0:a.map((function(n,e){return(0,N.jsx)("span",{className:"extras-text rounded pr-2 pl-2",children:n.value},e+"-"+n.value)}))}),(0,N.jsx)("br",{}),(0,N.jsx)(E.Z,{wrap:!0,className:"mt-2",children:null===e||void 0===e||null===(l=e.addons)||void 0===l?void 0:l.map((function(n,e){var t,i;return(0,N.jsxs)("span",{className:"extras-text rounded pr-2 pl-2",children:[null===n||void 0===n||null===(t=n.countable)||void 0===t||null===(i=t.translation)||void 0===i?void 0:i.title," x"," ",null===n||void 0===n?void 0:n.quantity]},e+"-"+(null===n||void 0===n?void 0:n.quantity))}))}),(0,N.jsxs)("div",{className:"product-counter",children:[(0,N.jsx)("span",{children:(0,O.Z)((null===e||void 0===e?void 0:e.total_price)||(null===e||void 0===e?void 0:e.price),null===_||void 0===_?void 0:_.symbol)}),(0,N.jsxs)("div",{className:"count",children:[(0,N.jsx)(V.Z,{className:"button-counter",shape:"circle",icon:(0,N.jsx)(A.Z,{size:14}),onClick:function(){return an(e)}}),(0,N.jsx)("span",{children:null===e||void 0===e?void 0:e.countable_quantity}),(0,N.jsx)(V.Z,{className:"button-counter",shape:"circle",icon:(0,N.jsx)(D.Z,{size:14}),onClick:function(){return rn(e)}}),(0,N.jsx)(V.Z,{className:"button-counter",shape:"circle",onClick:function(){return n=e,r((0,Z.h2)(n));var n},icon:(0,N.jsx)(jn.Z,{size:14})})]})]})]})})]})},(null===e||void 0===e?void 0:e.id)+"_"+t):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("h4",{className:"mt-2",children:[" ",n("Bonus.product")," "]}),(0,N.jsx)("div",{className:"custom-cart-container",children:(0,N.jsxs)(o.Z,{className:"product-row",children:[(0,N.jsx)(B.Z,{width:70,height:"auto",src:(0,M.Z)(null===e||void 0===e?void 0:e.img),preview:!0,placeholder:!0,className:"rounded"}),(0,N.jsx)(u.Z,{span:18,className:"product-col",children:(0,N.jsxs)("div",{children:[(0,N.jsx)("span",{className:"product-name",children:null===e||void 0===e||null===(s=e.translation)||void 0===s?void 0:s.title}),(0,N.jsx)("br",{}),(0,N.jsx)(E.Z,{wrap:!0,className:"mt-2",children:null===e||void 0===e||null===(d=e.stock)||void 0===d?void 0:d.map((function(n,e){return(0,N.jsx)("span",{className:"extras-text rounded pr-2 pl-2",children:null===n||void 0===n?void 0:n.value},e+"_"+(null===n||void 0===n?void 0:n.value))}))}),(0,N.jsx)("br",{}),(0,N.jsx)(E.Z,{wrap:!0,className:"mt-2",children:null===(c=e.addons)||void 0===c?void 0:c.map((function(n,e){var t,i;return(0,N.jsxs)("span",{className:"extras-text rounded pr-2 pl-2",children:[null===n||void 0===n||null===(t=n.countable)||void 0===t||null===(i=t.translation)||void 0===i?void 0:i.title," x"," ",null===n||void 0===n?void 0:n.quantity]},e+"_"+(null===n||void 0===n?void 0:n.quantity))}))}),(0,N.jsxs)("div",{className:"product-counter",children:[(0,N.jsx)("span",{children:(0,O.Z)((null===e||void 0===e?void 0:e.total_price)||(null===e||void 0===e?void 0:e.price),null===_||void 0===_?void 0:_.symbol)}),(0,N.jsxs)("div",{className:"count",children:[(0,N.jsx)(V.Z,{className:"button-counter",shape:"circle",icon:(0,N.jsx)(A.Z,{size:14}),onClick:function(){return an(e)},disabled:!0}),(0,N.jsx)("span",{children:null===e||void 0===e?void 0:e.quantity}),(0,N.jsx)(V.Z,{className:"button-counter",shape:"circle",icon:(0,N.jsx)(D.Z,{size:14}),onClick:function(){return rn(e)},disabled:!0})]})]})]})})]})},e.id+"_"+t)]})})),(0,N.jsxs)("div",{className:"d-flex my-3",children:[(0,N.jsx)(nn.Z,{placeholder:n("coupon"),className:"w-100 mr-2",addonAfter:null!==(d=j.find((function(n){return n.shop_id===e.id})))&&void 0!==d&&d.verified?(0,N.jsx)(gn.Z,{style:{color:"#18a695"}}):null,defaultValue:null===(c=j.find((function(n){return n.shop_id===e.id})))||void 0===c?void 0:c.coupon,onBlur:function(n){var t;return r((0,Z.gU)({coupon:n.target.value,user_id:null===k||void 0===k||null===(t=k.user)||void 0===t?void 0:t.value,shop_id:e.id,verified:!1}))}}),(0,N.jsx)(V.Z,{onClick:function(){return function(n){var e=j.find((function(e){return e.shop_id===n}));e&&(Q(n),bn.Z.checkCoupon(e).then((function(e){var t=e.data.id;r((0,Z.Ng)({coupon:t,bag_id:m})),r((0,Z.nC)({shop_id:n,price:e.data.price,verified:!0}))})).catch((function(){return r((0,Z.nC)({shop_id:n,price:0,verified:!1}))})).finally((function(){return Q(null)})))}(e.id)},loading:J===e.id,children:n("check.coupon")})]})]},e.uuid+"_"+t)})),(0,N.jsx)(o.Z,{className:"all-price-row",children:(0,N.jsxs)(u.Z,{span:24,className:"col",children:[(0,N.jsxs)("div",{className:"all-price-container",children:[(0,N.jsx)("span",{children:n("sub.total")}),(0,N.jsx)("span",{children:(0,O.Z)(y.product_total,null===_||void 0===_?void 0:_.symbol)})]}),(0,N.jsxs)("div",{className:"all-price-container",children:[(0,N.jsx)("span",{children:n("shop.tax")}),(0,N.jsx)("span",{children:(0,O.Z)(y.shop_tax,null===_||void 0===_?void 0:_.symbol)})]}),(0,N.jsxs)("div",{className:"all-price-container",children:[(0,N.jsx)("span",{children:n("delivery.fee")}),(0,N.jsx)("span",{children:(0,O.Z)(y.delivery_fee,null===_||void 0===_?void 0:_.symbol)})]})]})}),(0,N.jsxs)(o.Z,{className:"submit-row",children:[(0,N.jsxs)(u.Z,{span:14,className:"col",children:[(0,N.jsx)("span",{children:n("total.amount")}),(0,N.jsx)("span",{children:(0,O.Z)(y.order_total,null===_||void 0===_?void 0:_.symbol)})]}),(0,N.jsx)(u.Z,{className:"col2",children:(0,N.jsx)(V.Z,{type:"primary",onClick:function(){return function(){var e,i,a,l,s,o,u;if(_)if(k.address)if(k.delivery_time)if(k.delivery_date){P(!0);var d=null===c||void 0===c?void 0:c.map((function(n){var e;return{stock_id:null===(e=n.stockID)||void 0===e?void 0:e.id,quantity:n.quantity,bonus:n.bonus}})),v=null===c||void 0===c?void 0:c.flatMap((function(n){var e;return null===(e=n.addons)||void 0===e?void 0:e.map((function(e){return{stock_id:e.stockID,quantity:e.quantity,parent_id:n.stockID.id}}))})),p={user_id:null===(e=k.user)||void 0===e?void 0:e.value,currency_id:null===_||void 0===_?void 0:_.id,rate:_.rate,shop_id:k.shop.value,delivery_id:k.deliveries.label,delivery_fee:k.delivery_fee,coupon:null===(i=j[0])||void 0===i?void 0:i.coupon,tax:y.order_tax,payment_type:null===(a=k.paymentType)||void 0===a?void 0:a.label,delivery_date:k.delivery_date,delivery_address_id:null===(l=k.address)||void 0===l?void 0:l.address,address:{address:null===(s=k.address)||void 0===s?void 0:s.address,office:null,house:null,floor:null},location:{latitude:null===(o=k.address)||void 0===o?void 0:o.lat,longitude:null===(u=k.address)||void 0===u?void 0:u.lng},delivery_time:hn()(k.delivery_time,"HH:mm").format("HH:mm"),delivery_type:k.deliveries.label.toLowerCase(),delivery_type_id:k.deliveries.value,products:d.concat.apply(d,(0,z.Z)(v))},f={payment_sys_id:k.paymentType.value};_n.Z.create(p).then((function(n){r((0,Z.q6)(n.data)),sn(n.data.id,f),t.resetFields()})).catch((function(n){return console.error(n)})).finally((function(){return P(!1)}))}else H.Am.warning(n("please.select.deliveryDate"));else H.Am.warning(n("shop.closed"));else H.Am.warning(n("please.select.address"));else H.Am.warning(n("please.select.currency"))}()},disabled:!v.length,loading:Y,children:n("place.order")})})]})]}),L?(0,N.jsx)(Nn.Z,{orderId:L,handleClose:function(){R(null),r((0,Z.LL)()),0!==m&&r((0,Z.KI)(m)),H.Am.success(n("successfully.closed")),r((0,h.q1)({perPage:12,currency_id:null===_||void 0===_?void 0:_.id,shop_id:null===tn||void 0===tn?void 0:tn.shop.value}))}}):""]})}function Sn(){return(0,N.jsx)("div",{className:"pos-system",children:(0,N.jsx)(w.Z,{className:"site-layout",children:(0,N.jsxs)(o.Z,{gutter:24,children:[(0,N.jsxs)(u.Z,{span:15,children:[(0,N.jsx)(k,{}),(0,N.jsx)(Q,{})]}),(0,N.jsxs)(u.Z,{span:9,children:[(0,N.jsx)(yn,{}),(0,N.jsx)(Cn,{})]})]})})})}},8846:function(n,e,t){t.d(e,{Z:function(){return o}});var i=t(1413),r=t(47313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},l=t(17469),s=function(n,e){return r.createElement(l.Z,(0,i.Z)((0,i.Z)({},n),{},{ref:e,icon:a}))};s.displayName="MinusOutlined";var o=r.forwardRef(s)},55768:function(n,e,t){t.d(e,{Z:function(){return o}});var i=t(1413),r=t(47313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},l=t(17469),s=function(n,e){return r.createElement(l.Z,(0,i.Z)((0,i.Z)({},n),{},{ref:e,icon:a}))};s.displayName="PlusCircleOutlined";var o=r.forwardRef(s)},31774:function(n,e,t){t.d(e,{Z:function(){return o}});var i=t(1413),r=t(47313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"},l=t(17469),s=function(n,e){return r.createElement(l.Z,(0,i.Z)((0,i.Z)({},n),{},{ref:e,icon:a}))};s.displayName="PrinterOutlined";var o=r.forwardRef(s)},2337:function(n,e){e.Z=void 0;var t=function(n){return null};e.Z=t}}]);